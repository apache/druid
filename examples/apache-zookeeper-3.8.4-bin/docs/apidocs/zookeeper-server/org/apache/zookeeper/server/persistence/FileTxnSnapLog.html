<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.21) on Mon Feb 12 22:16:29 UTC 2024 -->
<title>FileTxnSnapLog (Apache ZooKeeper - Server 3.8.4 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-02-12">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FileTxnSnapLog (Apache ZooKeeper - Server 3.8.4 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileTxnSnapLog.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.zookeeper.server.persistence</a></div>
<h2 title="Class FileTxnSnapLog" class="title">Class FileTxnSnapLog</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.zookeeper.server.persistence.FileTxnSnapLog</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">FileTxnSnapLog</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">This is a helper class
 above the implementations
 of txnlog and snapshot
 classes</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FileTxnSnapLog.DatadirException.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog.DatadirException</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FileTxnSnapLog.LogDirContentCheckException.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog.LogDirContentCheckException</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FileTxnSnapLog.PlayBackListener.html" title="interface in org.apache.zookeeper.server.persistence">FileTxnSnapLog.PlayBackListener</a></span></code></th>
<td class="colLast">
<div class="block">This listener helps
 the external apis calling
 restore to gather information
 while the data is being
 restored.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FileTxnSnapLog.SnapDirContentCheckException.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog.SnapDirContentCheckException</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#version">version</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#VERSION">VERSION</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ZOOKEEPER_DATADIR_AUTOCREATE">ZOOKEEPER_DATADIR_AUTOCREATE</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT">ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ZOOKEEPER_SNAPSHOT_TRUST_EMPTY">ZOOKEEPER_SNAPSHOT_TRUST_EMPTY</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.io.File,java.io.File)">FileTxnSnapLog</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;dataDir,
              <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;snapDir)</code></th>
<td class="colLast">
<div class="block">the constructor which takes the datadir and
 snapdir.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#append(org.apache.zookeeper.server.Request)">append</a></span>&#8203;(<a href="../Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;si)</code></th>
<td class="colLast">
<div class="block">append the request to the transaction logs</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">close the transaction log files</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#commit()">commit</a></span>()</code></th>
<td class="colLast">
<div class="block">commit the transaction of logs</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fastForwardFromEdits(org.apache.zookeeper.server.DataTree,java.util.Map,org.apache.zookeeper.server.persistence.FileTxnSnapLog.PlayBackListener)">fastForwardFromEdits</a></span>&#8203;(<a href="../DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;dt,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;sessions,
                    <a href="FileTxnSnapLog.PlayBackListener.html" title="interface in org.apache.zookeeper.server.persistence">FileTxnSnapLog.PlayBackListener</a>&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">This function will fast forward the server database to have the latest
 transactions in it.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findMostRecentSnapshot()">findMostRecentSnapshot</a></span>()</code></th>
<td class="colLast">
<div class="block">the most recent snapshot in the snapshot
 directory</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findNRecentSnapshots(int)">findNRecentSnapshots</a></span>&#8203;(int&nbsp;n)</code></th>
<td class="colLast">
<div class="block">the n most recent snapshots</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findNValidSnapshots(int)">findNValidSnapshots</a></span>&#8203;(int&nbsp;n)</code></th>
<td class="colLast">
<div class="block">the n recent valid snapshots</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDataLogDir()">getDataLogDir</a></span>()</code></th>
<td class="colLast">
<div class="block">get the data log dir used by this filetxn
 snap log</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastLoggedZxid()">getLastLoggedZxid</a></span>()</code></th>
<td class="colLast">
<div class="block">the last logged zxid on the transaction logs</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="SnapshotInfo.html" title="class in org.apache.zookeeper.server.persistence">SnapshotInfo</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastSnapshotInfo()">getLastSnapshotInfo</a></span>()</code></th>
<td class="colLast">
<div class="block">get information of the last saved/restored snapshot</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSnapDir()">getSnapDir</a></span>()</code></th>
<td class="colLast">
<div class="block">get the snap dir used by this
 filetxn snap log</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSnapshotLogs(long)">getSnapshotLogs</a></span>&#8203;(long&nbsp;zxid)</code></th>
<td class="colLast">
<div class="block">get the snapshot logs which may contain transactions newer than the given zxid.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTotalLogSize()">getTotalLogSize</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTxnLogElapsedSyncTime()">getTxnLogElapsedSyncTime</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processTransaction(org.apache.zookeeper.txn.TxnHeader,org.apache.zookeeper.server.DataTree,java.util.Map,org.apache.jute.Record)">processTransaction</a></span>&#8203;(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnHeader.html?is-external=true" title="class or interface in org.apache.zookeeper.txn" class="externalLink">TxnHeader</a>&nbsp;hdr,
                  <a href="../DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;dt,
                  <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;sessions,
                  <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/Record.html?is-external=true" title="class or interface in org.apache.jute" class="externalLink">Record</a>&nbsp;txn)</code></th>
<td class="colLast">
<div class="block">process the transaction on the datatree</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="TxnLog.TxnIterator.html" title="interface in org.apache.zookeeper.server.persistence">TxnLog.TxnIterator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readTxnLog(long)">readTxnLog</a></span>&#8203;(long&nbsp;zxid)</code></th>
<td class="colLast">
<div class="block">Get TxnIterator for iterating through txnlog starting at a given zxid</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code><a href="TxnLog.TxnIterator.html" title="interface in org.apache.zookeeper.server.persistence">TxnLog.TxnIterator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readTxnLog(long,boolean)">readTxnLog</a></span>&#8203;(long&nbsp;zxid,
          boolean&nbsp;fastForward)</code></th>
<td class="colLast">
<div class="block">Get TxnIterator for iterating through txnlog starting at a given zxid</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restore(org.apache.zookeeper.server.DataTree,java.util.Map,org.apache.zookeeper.server.persistence.FileTxnSnapLog.PlayBackListener)">restore</a></span>&#8203;(<a href="../DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;dt,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;sessions,
       <a href="FileTxnSnapLog.PlayBackListener.html" title="interface in org.apache.zookeeper.server.persistence">FileTxnSnapLog.PlayBackListener</a>&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">this function restores the server
 database after reading from the
 snapshots and transaction logs</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#rollLog()">rollLog</a></span>()</code></th>
<td class="colLast">
<div class="block">roll the transaction logs</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#save(org.apache.zookeeper.server.DataTree,java.util.concurrent.ConcurrentHashMap,boolean)">save</a></span>&#8203;(<a href="../DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;dataTree,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;sessionsWithTimeouts,
    boolean&nbsp;syncSnap)</code></th>
<td class="colLast">
<div class="block">save the datatree and the sessions into a snapshot</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setServerStats(org.apache.zookeeper.server.ServerStats)">setServerStats</a></span>&#8203;(<a href="../ServerStats.html" title="class in org.apache.zookeeper.server">ServerStats</a>&nbsp;serverStats)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setTotalLogSize(long)">setTotalLogSize</a></span>&#8203;(long&nbsp;size)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shouldForceWriteInitialSnapshotAfterLeaderElection()">shouldForceWriteInitialSnapshotAfterLeaderElection</a></span>()</code></th>
<td class="colLast">
<div class="block">whether to force the write of an initial snapshot after a leader election,
 to address ZOOKEEPER-3781 after upgrading from Zookeeper 3.4.x.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#truncateLog(long)">truncateLog</a></span>&#8203;(long&nbsp;zxid)</code></th>
<td class="colLast">
<div class="block">truncate the transaction logs the zxid
 specified</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="VERSION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>VERSION</h4>
<pre>public static final&nbsp;int VERSION</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.VERSION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="version">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>version</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a> version</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.version">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="ZOOKEEPER_DATADIR_AUTOCREATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZOOKEEPER_DATADIR_AUTOCREATE</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a> ZOOKEEPER_DATADIR_AUTOCREATE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.ZOOKEEPER_DATADIR_AUTOCREATE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a> ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="ZOOKEEPER_SNAPSHOT_TRUST_EMPTY">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ZOOKEEPER_SNAPSHOT_TRUST_EMPTY</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a> ZOOKEEPER_SNAPSHOT_TRUST_EMPTY</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.ZOOKEEPER_SNAPSHOT_TRUST_EMPTY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.io.File,java.io.File)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileTxnSnapLog</h4>
<pre>public&nbsp;FileTxnSnapLog&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;dataDir,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;snapDir)
               throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">the constructor which takes the datadir and
 snapdir.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dataDir</code> - the transaction directory</dd>
<dd><code>snapDir</code> - the snapshot directory</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="setServerStats(org.apache.zookeeper.server.ServerStats)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setServerStats</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setServerStats&#8203;(<a href="../ServerStats.html" title="class in org.apache.zookeeper.server">ServerStats</a>&nbsp;serverStats)</pre>
</li>
</ul>
<a id="getDataLogDir()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataLogDir</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;getDataLogDir()</pre>
<div class="block">get the data log dir used by this filetxn
 snap log</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the data log dir</dd>
</dl>
</li>
</ul>
<a id="getSnapDir()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSnapDir</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;getSnapDir()</pre>
<div class="block">get the snap dir used by this
 filetxn snap log</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the snap dir</dd>
</dl>
</li>
</ul>
<a id="getLastSnapshotInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastSnapshotInfo</h4>
<pre class="methodSignature">public&nbsp;<a href="SnapshotInfo.html" title="class in org.apache.zookeeper.server.persistence">SnapshotInfo</a>&nbsp;getLastSnapshotInfo()</pre>
<div class="block">get information of the last saved/restored snapshot</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>info of last snapshot</dd>
</dl>
</li>
</ul>
<a id="shouldForceWriteInitialSnapshotAfterLeaderElection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldForceWriteInitialSnapshotAfterLeaderElection</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;shouldForceWriteInitialSnapshotAfterLeaderElection()</pre>
<div class="block">whether to force the write of an initial snapshot after a leader election,
 to address ZOOKEEPER-3781 after upgrading from Zookeeper 3.4.x.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if an initial snapshot should be written even if not otherwise required, false otherwise.</dd>
</dl>
</li>
</ul>
<a id="restore(org.apache.zookeeper.server.DataTree,java.util.Map,org.apache.zookeeper.server.persistence.FileTxnSnapLog.PlayBackListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restore</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;restore&#8203;(<a href="../DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;dt,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;sessions,
                    <a href="FileTxnSnapLog.PlayBackListener.html" title="interface in org.apache.zookeeper.server.persistence">FileTxnSnapLog.PlayBackListener</a>&nbsp;listener)
             throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">this function restores the server
 database after reading from the
 snapshots and transaction logs</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dt</code> - the datatree to be restored</dd>
<dd><code>sessions</code> - the sessions to be restored</dd>
<dd><code>listener</code> - the playback listener to run on the
 database restoration</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the highest zxid restored</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="fastForwardFromEdits(org.apache.zookeeper.server.DataTree,java.util.Map,org.apache.zookeeper.server.persistence.FileTxnSnapLog.PlayBackListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fastForwardFromEdits</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;fastForwardFromEdits&#8203;(<a href="../DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;dt,
                                 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;sessions,
                                 <a href="FileTxnSnapLog.PlayBackListener.html" title="interface in org.apache.zookeeper.server.persistence">FileTxnSnapLog.PlayBackListener</a>&nbsp;listener)
                          throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">This function will fast forward the server database to have the latest
 transactions in it.  This is the same as restore, but only reads from
 the transaction logs and not restores from a snapshot.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dt</code> - the datatree to write transactions to.</dd>
<dd><code>sessions</code> - the sessions to be restored.</dd>
<dd><code>listener</code> - the playback listener to run on the
 database transactions.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the highest zxid restored.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="readTxnLog(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readTxnLog</h4>
<pre class="methodSignature">public&nbsp;<a href="TxnLog.TxnIterator.html" title="interface in org.apache.zookeeper.server.persistence">TxnLog.TxnIterator</a>&nbsp;readTxnLog&#8203;(long&nbsp;zxid)
                              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Get TxnIterator for iterating through txnlog starting at a given zxid</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>zxid</code> - starting zxid</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>TxnIterator</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="readTxnLog(long,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readTxnLog</h4>
<pre class="methodSignature">public&nbsp;<a href="TxnLog.TxnIterator.html" title="interface in org.apache.zookeeper.server.persistence">TxnLog.TxnIterator</a>&nbsp;readTxnLog&#8203;(long&nbsp;zxid,
                                     boolean&nbsp;fastForward)
                              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Get TxnIterator for iterating through txnlog starting at a given zxid</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>zxid</code> - starting zxid</dd>
<dd><code>fastForward</code> - true if the iterator should be fast forwarded to point
        to the txn of a given zxid, else the iterator will point to the
        starting txn of a txnlog that may contain txn of a given zxid</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>TxnIterator</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="processTransaction(org.apache.zookeeper.txn.TxnHeader,org.apache.zookeeper.server.DataTree,java.util.Map,org.apache.jute.Record)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processTransaction</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;processTransaction&#8203;(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnHeader.html?is-external=true" title="class or interface in org.apache.zookeeper.txn" class="externalLink">TxnHeader</a>&nbsp;hdr,
                               <a href="../DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;dt,
                               <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;sessions,
                               <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/Record.html?is-external=true" title="class or interface in org.apache.jute" class="externalLink">Record</a>&nbsp;txn)
                        throws <a href="../../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></pre>
<div class="block">process the transaction on the datatree</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hdr</code> - the hdr of the transaction</dd>
<dd><code>dt</code> - the datatree to apply transaction to</dd>
<dd><code>sessions</code> - the sessions to be restored</dd>
<dd><code>txn</code> - the transaction to be applied</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></code></dd>
</dl>
</li>
</ul>
<a id="getLastLoggedZxid()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastLoggedZxid</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getLastLoggedZxid()</pre>
<div class="block">the last logged zxid on the transaction logs</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the last logged zxid</dd>
</dl>
</li>
</ul>
<a id="save(org.apache.zookeeper.server.DataTree,java.util.concurrent.ConcurrentHashMap,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>save</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;save&#8203;(<a href="../DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a>&nbsp;dataTree,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;sessionsWithTimeouts,
                 boolean&nbsp;syncSnap)
          throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">save the datatree and the sessions into a snapshot</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dataTree</code> - the datatree to be serialized onto disk</dd>
<dd><code>sessionsWithTimeouts</code> - the session timeouts to be
 serialized onto disk</dd>
<dd><code>syncSnap</code> - sync the snapshot immediately after write</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="truncateLog(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncateLog</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;truncateLog&#8203;(long&nbsp;zxid)</pre>
<div class="block">truncate the transaction logs the zxid
 specified</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>zxid</code> - the zxid to truncate the logs to</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if able to truncate the log, false if not</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findMostRecentSnapshot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findMostRecentSnapshot</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&nbsp;findMostRecentSnapshot()
                            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">the most recent snapshot in the snapshot
 directory</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the file that contains the most
 recent snapshot</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findNRecentSnapshots(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNRecentSnapshots</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&gt;&nbsp;findNRecentSnapshots&#8203;(int&nbsp;n)
                                throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">the n most recent snapshots</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>n</code> - the number of recent snapshots</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the list of n most recent snapshots, with
 the most recent in front</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="findNValidSnapshots(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNValidSnapshots</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>&gt;&nbsp;findNValidSnapshots&#8203;(int&nbsp;n)</pre>
<div class="block">the n recent valid snapshots</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>n</code> - the number of recent valid snapshots</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the list of n recent valid snapshots, with
 the most recent in front</dd>
</dl>
</li>
</ul>
<a id="getSnapshotLogs(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSnapshotLogs</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io" class="externalLink">File</a>[]&nbsp;getSnapshotLogs&#8203;(long&nbsp;zxid)</pre>
<div class="block">get the snapshot logs which may contain transactions newer than the given zxid.
 This includes logs with starting zxid greater than given zxid, as well as the
 newest transaction log with starting zxid less than given zxid.  The latter log
 file may contain transactions beyond given zxid.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>zxid</code> - the zxid that contains logs greater than
 zxid</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the snapshot logs which may contain transactions newer than the given zxid</dd>
</dl>
</li>
</ul>
<a id="append(org.apache.zookeeper.server.Request)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;append&#8203;(<a href="../Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;si)
               throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">append the request to the transaction logs</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>si</code> - the request to be appended</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true iff something appended, otw false</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="commit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;commit()
            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">commit the transaction of logs</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="getTxnLogElapsedSyncTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTxnLogElapsedSyncTime</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getTxnLogElapsedSyncTime()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>elapsed sync time of transaction log commit in milliseconds</dd>
</dl>
</li>
</ul>
<a id="rollLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollLog</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;rollLog()
             throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">roll the transaction logs</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()
           throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">close the transaction log files</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="setTotalLogSize(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTotalLogSize</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setTotalLogSize&#8203;(long&nbsp;size)</pre>
</li>
</ul>
<a id="getTotalLogSize()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getTotalLogSize</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getTotalLogSize()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileTxnSnapLog.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2008&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
