language: java

jdk:
  - oraclejdk8

before_install: sudo echo "MAVEN_OPTS='-Xmx2048m -Xms1024m'" > ~/.mavenrc

script:
  - mvn clean test -B -Pparallel-test -Dmaven.fork.count=2 -T 1C && mvn clean -Pstrict compile test-compile -B -T 1C

env:
  global:
    - MAVEN_OPTS: "-Xmx2048m -Xms1024m"

sudo: required

cache:
  directories:
      - $HOME/.m2

