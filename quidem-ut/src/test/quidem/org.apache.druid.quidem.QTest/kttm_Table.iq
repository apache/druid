#started Wed Jul 10 17:02:53 IST 2024
!use druidtest:///?componentSupplier=KttmNestedComponentSupplier
!set outputformat mysql
# Wed Jul 10 19:07:21 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:34.290 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 19:07:21 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:34.290 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 19:07:21 IST 2024
SELECT
(COUNT(*)) AS "__VALUE__"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY ();
+-----------+
| __VALUE__ |
+-----------+
|      4681 |
+-----------+
(1 row)

!ok
# Wed Jul 10 19:07:30 IST 2024
SELECT
CAST(t."app_version" AS VARCHAR) AS "app_version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------------+-------+
| app_version | count |
+-------------+-------+
| 1.9.6       |  4681 |
+-------------+-------+
(1 row)

!ok
# Wed Jul 10 19:07:31 IST 2024
SELECT
(COUNT(*)) AS "__VALUE__"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6'))
GROUP BY ();
+-----------+
| __VALUE__ |
+-----------+
|      4681 |
+-----------+
(1 row)

!ok
# Wed Jul 10 19:07:35 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
| 76.0.3809.100   |  1401 |
| 12.1.2          |   846 |
| 76.0.3809.111   |   433 |
| 12.1.1          |   287 |
| 75.0.3770.144   |   208 |
| 64.0.3282.140   |   193 |
| 76.0.3809.102   |   182 |
|                 |    97 |
| 68.0            |    64 |
| 12.0            |    61 |
| 75.0.3770.142   |    59 |
| 67.0.3396.87    |    55 |
| 74.0.3729.159   |    55 |
| 11.0            |    41 |
| 12.1            |    41 |
| 70.0.3538.102   |    29 |
| 75.0.3770.100   |    29 |
| 12.0.3          |    23 |
| 76.0.3809.89    |    23 |
| 13.0            |    21 |
| 11.1.2          |    20 |
| 62.0.3331.116   |    17 |
| 63.0.3239.132   |    17 |
| 75.0.3770.101   |    16 |
| 76.0.3809.123   |    16 |
| 10.1.2          |    15 |
| 19.7.3.172      |    15 |
| 75.0.3770.129   |    15 |
| 19.7.2.516      |    14 |
| 69.0.3497.100   |    13 |
| 74.0.3729.125   |    13 |
| 49.0.2623.112   |    12 |
| 75.0.3770.143   |    12 |
| 76.2.1          |    11 |
| rv:11.0         |    11 |
| 12.0.2          |    10 |
| 72.0.3626.121   |    10 |
| 72.0.3626.122   |    10 |
| 74.0.3729.169   |    10 |
| 10.0            |     9 |
| 12.0.1          |     8 |
| 73.0.3683.86    |     8 |
| 73.0.3683.88    |     8 |
| 9.0             |     8 |
| 52.0.2743.116   |     6 |
| 71.0.3578.127   |     6 |
| 74.0.3729.131   |     6 |
| 74.0.3729.136   |     6 |
| 76.0.3809.87    |     6 |
| 48.0            |     5 |
| 51.0.2704.79    |     5 |
| 66.0            |     5 |
| 71.0.3578.141   |     5 |
| 74.0.3729.157   |     5 |
| 11.0.3          |     4 |
| 19.7.1.114      |     4 |
| 42.0.2311.135   |     4 |
| 46.0.2486.0     |     4 |
| 58.0.2988.0     |     4 |
| 64.0.3282.137   |     4 |
| 69.0.3497.128   |     4 |
| 70.0.3538.110   |     4 |
| 73.0.3683.114   |     4 |
| 75.0.3770.102   |     4 |
| 9.1.2           |     4 |
| 9.1.3           |     4 |
| 11.1            |     3 |
| 53.0.2785.34    |     3 |
| 57.0.2987.110   |     3 |
| 63.0.3368.43    |     3 |
| 67.0.3396.99    |     3 |
| 68.0.3440.91    |     3 |
| 71.0.3578.99    |     3 |
| 75.0.3770.80    |     3 |
| 75.0.3770.90    |     3 |
| 76.0.3809.81    |     3 |
| 78.0.3879.0     |     3 |
| 10.1            |     2 |
| 11.1.1          |     2 |
| 19.4.2.702      |     2 |
| 19.7.0.117.00   |     2 |
| 43.0.2357.93    |     2 |
| 52.0            |     2 |
| 56.0.2924.87    |     2 |
| 59.0.3043.0     |     2 |
| 59.0.3071.125   |     2 |
| 60.0.3112.116   |     2 |
| 62.0.3331.132   |     2 |
| 62.0.3331.99    |     2 |
| 63.0.3239.111   |     2 |
| 65.0.3325.181   |     2 |
| 72.0.3626.81    |     2 |
| 73.0.3683.103   |     2 |
| 74.0.3729.108   |     2 |
| 74.0.3729.112   |     2 |
| 74.0.3729.180   |     2 |
| 77.0.3865.18    |     2 |
| 77.0.3865.35    |     2 |
| 77.0.3865.42    |     2 |
| 78.0.3892.0     |     2 |
| 10.0.2          |     1 |
| 10.1.1          |     1 |
| 11.0.1          |     1 |
| 11.0.2          |     1 |
| 18.6.1.770      |     1 |
| 19.3.1.333.00   |     1 |
| 19.6.3.318.00   |     1 |
| 19.7.2.455      |     1 |
| 19.7.3.91.00    |     1 |
| 38.0.1025.166   |     1 |
| 38.0.2125.102   |     1 |
| 38.0.2125.122   |     1 |
| 4.0             |     1 |
| 45.0.2454.85    |     1 |
| 47.0            |     1 |
| 5.1.9           |     1 |
| 5.2.2           |     1 |
| 51.0.2704.103   |     1 |
| 51.0.2704.84    |     1 |
| 55.0.2883.87    |     1 |
| 56.0.2924.84    |     1 |
| 57.16.2987.98   |     1 |
| 58.0.3014.0     |     1 |
| 6.2.8           |     1 |
| 60.0            |     1 |
| 60.0.3255.69    |     1 |
| 60.0.3255.95    |     1 |
| 61.0.3163.100   |     1 |
| 62.0.3331.119   |     1 |
| 62.0.3331.88    |     1 |
| 63.0.3237.0     |     1 |
| 63.0.3239.73    |     1 |
| 64.0            |     1 |
| 64.0.3282.167   |     1 |
| 65.0.3325.109   |     1 |
| 66.0.3359.158   |     1 |
| 66.0.3359.181   |     1 |
| 68.0.3440.106   |     1 |
| 69.0.3497.120   |     1 |
| 7.8.1.40497     |     1 |
| 70.0.3538.80    |     1 |
| 71.0.3578.98    |     1 |
| 72.0.3626.105   |     1 |
| 72.0.3626.109   |     1 |
| 72.0.3626.117   |     1 |
| 72.0.3626.120   |     1 |
| 73.0.3683.75    |     1 |
| 73.0.3683.90    |     1 |
| 74.0.3729.141   |     1 |
| 75.0.3770.67    |     1 |
| 75.0.3770.89    |     1 |
| 8.0.5           |     1 |
| 9.1.1           |     1 |
+-----------------+-------+
(153 rows)

!ok
# Wed Jul 10 19:07:35 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','12.1.1','76.0.3809.102','75.0.3770.144','64.0.3282.140','','68.0','12.0','75.0.3770.142','67.0.3396.87','12.1','70.0.3538.102','74.0.3729.159','11.0','75.0.3770.100','11.1.2'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
|                 |    97 |
| 11.0            |    41 |
| 11.1.2          |    20 |
| 12.0            |    61 |
| 12.1            |    41 |
| 12.1.1          |   287 |
| 12.1.2          |   846 |
| 64.0.3282.140   |   193 |
| 67.0.3396.87    |    55 |
| 68.0            |    64 |
| 70.0.3538.102   |    29 |
| 74.0.3729.159   |    55 |
| 75.0.3770.100   |    29 |
| 75.0.3770.142   |    59 |
| 75.0.3770.144   |   208 |
| 76.0.3809.100   |  1401 |
| 76.0.3809.102   |   182 |
| 76.0.3809.111   |   433 |
+-----------------+-------+
(18 rows)

!ok
# Wed Jul 10 19:07:40 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','12.1.1','76.0.3809.102','75.0.3770.144','64.0.3282.140','','68.0','12.0','75.0.3770.142'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
+-----------------+-------+
(0 rows)

!ok
# Wed Jul 10 19:07:40 IST 2024
SELECT
(COUNT(*)) AS "v0",
(COUNT(*) FILTER (WHERE (CAST(t."app_version" AS VARCHAR)='1.9.6'))) AS "v1"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00')
GROUP BY ();
+----+----+
| v0 | v1 |
+----+----+
|  0 |  0 |
+----+----+
(1 row)

!ok
# Wed Jul 10 19:07:45 IST 2024
SELECT
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------+-------+
| Layer | count |
+-------+-------+
|       |  3487 |
| 6     |   332 |
| 5     |   290 |
| 4     |   210 |
| 3     |   166 |
| 2     |   120 |
| 1     |    47 |
| 0     |    29 |
+-------+-------+
(8 rows)

!ok
# Wed Jul 10 19:07:45 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','12.1.1','76.0.3809.102','75.0.3770.144','64.0.3282.140','','68.0','12.0','75.0.3770.142')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY 1,2;
+-----------------+-------+-------+
| Browser_Version | Layer | count |
+-----------------+-------+-------+
|                 | 5     |     5 |
|                 | 6     |     8 |
|                 |       |    76 |
| 12.0            | 5     |     4 |
| 12.0            | 6     |     8 |
| 12.0            |       |    44 |
| 12.1.1          | 5     |    21 |
| 12.1.1          | 6     |    21 |
| 12.1.1          |       |   215 |
| 12.1.2          | 5     |    68 |
| 12.1.2          | 6     |    59 |
| 12.1.2          |       |   619 |
| 64.0.3282.140   | 5     |    13 |
| 64.0.3282.140   | 6     |    12 |
| 64.0.3282.140   |       |   147 |
| 68.0            | 5     |     3 |
| 68.0            | 6     |     5 |
| 68.0            |       |    44 |
| 75.0.3770.142   | 5     |     1 |
| 75.0.3770.142   | 6     |     5 |
| 75.0.3770.142   |       |    44 |
| 75.0.3770.144   | 5     |    15 |
| 75.0.3770.144   | 6     |    17 |
| 75.0.3770.144   |       |   151 |
| 76.0.3809.100   | 5     |    71 |
| 76.0.3809.100   | 6     |    78 |
| 76.0.3809.100   |       |  1066 |
| 76.0.3809.102   | 5     |     7 |
| 76.0.3809.102   | 6     |    14 |
| 76.0.3809.102   |       |   138 |
| 76.0.3809.111   | 5     |    25 |
| 76.0.3809.111   | 6     |    44 |
| 76.0.3809.111   |       |   309 |
+-----------------+-------+-------+
(33 rows)

!ok
# Wed Jul 10 19:07:45 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','12.1.1','76.0.3809.102','75.0.3770.144','64.0.3282.140','','68.0','12.0','75.0.3770.142')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY 1,2;
+-----------------+-------+-------+
| Browser_Version | Layer | count |
+-----------------+-------+-------+
+-----------------+-------+-------+
(0 rows)

!ok
# Wed Jul 10 19:07:45 IST 2024
SELECT
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v0",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v1",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v2",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v3",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v4",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v5",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v6",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v7",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v8",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v9",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v10",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v11"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY ();
+------+----+------+----+-----+----+-----+----+-----+----+-----+-----+
| v0   | v1 | v2   | v3 | v4  | v5 | v6  | v7 | v8  | v9 | v10 | v11 |
+------+----+------+----+-----+----+-----+----+-----+----+-----+-----+
| 3487 |  0 | 3487 |  0 | 332 |  0 | 332 |  0 | 290 |  0 | 290 |   0 |
+------+----+------+----+-----+----+-----+----+-----+----+-----+-----+
(1 row)

!ok
# Wed Jul 10 19:07:49 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "r"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "r" DESC
LIMIT 101;
+-----------------------+------+
| Browser               | r    |
+-----------------------+------+
| Chrome                | 2395 |
| Mobile Safari         | 1129 |
| Chrome Mobile         |  597 |
| Safari                |  376 |
| Firefox               |   76 |
| Yandex.Browser        |   38 |
| Opera                 |   28 |
| Mozilla               |   11 |
| Silk                  |   11 |
| IE                    |    8 |
| Yandex.Browser mobile |    4 |
| Mobile Firefox        |    3 |
| Puffin                |    2 |
| Android browser       |    1 |
| Chromium              |    1 |
| PS4 Web browser       |    1 |
+-----------------------+------+
(16 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(t."app_version" AS VARCHAR) AS "app_version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------------+-------+
| app_version | count |
+-------------+-------+
| 1.9.6       |  4121 |
+-------------+-------+
(1 row)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY ();
+------+----+
| v0   | v1 |
+------+----+
| 4121 |  0 |
+------+----+
(1 row)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------+-------+
| Layer | count |
+-------+-------+
|       |  3088 |
| 6     |   289 |
| 5     |   253 |
| 4     |   180 |
| 3     |   144 |
| 2     |   103 |
| 1     |    39 |
| 0     |    25 |
+-------+-------+
(8 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
| 76.0.3809.100   |  1401 |
| 12.1.2          |   694 |
| 76.0.3809.111   |   433 |
| 75.0.3770.144   |   208 |
| 12.1.1          |   204 |
| 64.0.3282.140   |   193 |
| 76.0.3809.102   |   182 |
|                 |    96 |
| 75.0.3770.142   |    59 |
| 67.0.3396.87    |    55 |
| 74.0.3729.159   |    55 |
| 12.0            |    45 |
| 11.0            |    31 |
| 70.0.3538.102   |    29 |
| 75.0.3770.100   |    29 |
| 12.1            |    26 |
| 76.0.3809.89    |    23 |
| 63.0.3239.132   |    17 |
| 13.0            |    16 |
| 75.0.3770.101   |    16 |
| 76.0.3809.123   |    16 |
| 75.0.3770.129   |    15 |
| 69.0.3497.100   |    13 |
| 74.0.3729.125   |    13 |
| 49.0.2623.112   |    12 |
| 75.0.3770.143   |    12 |
| 72.0.3626.121   |    10 |
| 72.0.3626.122   |    10 |
| 74.0.3729.169   |    10 |
| 10.0            |     9 |
| 73.0.3683.86    |     8 |
| 73.0.3683.88    |     8 |
| 9.0             |     8 |
| 52.0.2743.116   |     6 |
| 71.0.3578.127   |     6 |
| 74.0.3729.131   |     6 |
| 74.0.3729.136   |     6 |
| 76.0.3809.87    |     6 |
| 51.0.2704.79    |     5 |
| 71.0.3578.141   |     5 |
| 74.0.3729.157   |     5 |
| 42.0.2311.135   |     4 |
| 46.0.2486.0     |     4 |
| 58.0.2988.0     |     4 |
| 64.0.3282.137   |     4 |
| 69.0.3497.128   |     4 |
| 70.0.3538.110   |     4 |
| 73.0.3683.114   |     4 |
| 75.0.3770.102   |     4 |
| 53.0.2785.34    |     3 |
| 57.0.2987.110   |     3 |
| 67.0.3396.99    |     3 |
| 68.0.3440.91    |     3 |
| 71.0.3578.99    |     3 |
| 75.0.3770.80    |     3 |
| 75.0.3770.90    |     3 |
| 76.0.3809.81    |     3 |
| 78.0.3879.0     |     3 |
| 43.0.2357.93    |     2 |
| 56.0.2924.87    |     2 |
| 59.0.3043.0     |     2 |
| 59.0.3071.125   |     2 |
| 60.0.3112.116   |     2 |
| 63.0.3239.111   |     2 |
| 65.0.3325.181   |     2 |
| 72.0.3626.81    |     2 |
| 73.0.3683.103   |     2 |
| 74.0.3729.108   |     2 |
| 74.0.3729.112   |     2 |
| 74.0.3729.180   |     2 |
| 77.0.3865.18    |     2 |
| 77.0.3865.35    |     2 |
| 77.0.3865.42    |     2 |
| 78.0.3892.0     |     2 |
| 38.0.1025.166   |     1 |
| 38.0.2125.102   |     1 |
| 38.0.2125.122   |     1 |
| 45.0.2454.85    |     1 |
| 51.0.2704.103   |     1 |
| 51.0.2704.84    |     1 |
| 55.0.2883.87    |     1 |
| 56.0.2924.84    |     1 |
| 57.16.2987.98   |     1 |
| 58.0.3014.0     |     1 |
| 61.0.3163.100   |     1 |
| 63.0.3237.0     |     1 |
| 63.0.3239.73    |     1 |
| 65.0.3325.109   |     1 |
| 66.0.3359.158   |     1 |
| 66.0.3359.181   |     1 |
| 68.0.3440.106   |     1 |
| 69.0.3497.120   |     1 |
| 70.0.3538.80    |     1 |
| 71.0.3578.98    |     1 |
| 72.0.3626.105   |     1 |
| 72.0.3626.109   |     1 |
| 72.0.3626.117   |     1 |
| 72.0.3626.120   |     1 |
| 73.0.3683.75    |     1 |
| 73.0.3683.90    |     1 |
| 74.0.3729.141   |     1 |
| 75.0.3770.67    |     1 |
| 75.0.3770.89    |     1 |
+-----------------+-------+
(103 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')))) AS "v0",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')))) AS "v1",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v2",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v3",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v4",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v5",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v6",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v7",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v8",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v9",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v10",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v11",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v12",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v13"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY ();
+------+----+------+----+------+----+-----+----+-----+----+-----+-----+-----+-----+
| v0   | v1 | v2   | v3 | v4   | v5 | v6  | v7 | v8  | v9 | v10 | v11 | v12 | v13 |
+------+----+------+----+------+----+-----+----+-----+----+-----+-----+-----+-----+
| 4121 |  0 | 3088 |  0 | 3088 |  0 | 289 |  0 | 289 |  0 | 253 |   0 | 253 |   0 |
+------+----+------+----+------+----+-----+----+-----+----+-----+-----+-----+-----+
(1 row)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY 1,2;
+-----------------+-------+-------+
| Browser_Version | Layer | count |
+-----------------+-------+-------+
|                 | 5     |     4 |
|                 | 6     |     8 |
|                 |       |    76 |
| 12.0            | 5     |     3 |
| 12.0            | 6     |     5 |
| 12.0            |       |    34 |
| 12.1.1          | 5     |    15 |
| 12.1.1          | 6     |    15 |
| 12.1.1          |       |   157 |
| 12.1.2          | 5     |    58 |
| 12.1.2          | 6     |    51 |
| 12.1.2          |       |   508 |
| 64.0.3282.140   | 5     |    13 |
| 64.0.3282.140   | 6     |    12 |
| 64.0.3282.140   |       |   147 |
| 67.0.3396.87    | 5     |     3 |
| 67.0.3396.87    | 6     |     4 |
| 67.0.3396.87    |       |    47 |
| 75.0.3770.142   | 5     |     1 |
| 75.0.3770.142   | 6     |     5 |
| 75.0.3770.142   |       |    44 |
| 75.0.3770.144   | 5     |    15 |
| 75.0.3770.144   | 6     |    17 |
| 75.0.3770.144   |       |   151 |
| 76.0.3809.100   | 5     |    71 |
| 76.0.3809.100   | 6     |    78 |
| 76.0.3809.100   |       |  1066 |
| 76.0.3809.102   | 5     |     7 |
| 76.0.3809.102   | 6     |    14 |
| 76.0.3809.102   |       |   138 |
| 76.0.3809.111   | 5     |    25 |
| 76.0.3809.111   | 6     |    44 |
| 76.0.3809.111   |       |   309 |
+-----------------+-------+-------+
(33 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY 1,2;
+-----------------+-------+-------+
| Browser_Version | Layer | count |
+-----------------+-------+-------+
+-----------------+-------+-------+
(0 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
|                 |    96 |
| 12.0            |    45 |
| 12.1.1          |   204 |
| 12.1.2          |   694 |
| 64.0.3282.140   |   193 |
| 67.0.3396.87    |    55 |
| 75.0.3770.142   |    59 |
| 75.0.3770.144   |   208 |
| 76.0.3809.100   |  1401 |
| 76.0.3809.102   |   182 |
| 76.0.3809.111   |   433 |
+-----------------+-------+
(11 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
+-----------------+-------+
(0 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+---------------------+-------+
| Os                  | count |
+---------------------+-------+
| iOS                 |    91 |
| Windows             |    74 |
| Android             |    53 |
| Chrome OS           |    33 |
| Windows 7           |    16 |
| OS X                |    15 |
| Windows 8.1         |     2 |
| Android 4.4 KitKat  |     1 |
| Linux               |     1 |
| OS X 10.10 Yosemite |     1 |
| OS X 10.9 Mavericks |     1 |
| Windows XP          |     1 |
+---------------------+-------+
(12 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL)
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+------------------------+-------+
| Os                     | count |
+------------------------+-------+
| Windows                |   925 |
| iOS                    |   857 |
| Android                |   436 |
| Chrome OS              |   385 |
| OS X                   |   219 |
| Windows 7              |   164 |
| Windows 8.1            |    54 |
| OS X 10.10 Yosemite    |    12 |
| Windows 8              |    10 |
| Linux                  |     7 |
| OS X 10.9 Mavericks    |     6 |
| Android 4.4 KitKat     |     3 |
| OS X 10.7 Lion         |     3 |
| OS X 10.6 Snow Leopard |     2 |
| Windows Vista          |     2 |
| Windows XP             |     2 |
| Android 4.2 Jelly Bean |     1 |
+------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+---------------------+-------+
| Os                  | count |
+---------------------+-------+
| iOS                 |    88 |
| Windows             |    64 |
| Android             |    38 |
| Chrome OS           |    29 |
| Windows 7           |    15 |
| OS X                |     7 |
| Windows 8.1         |     7 |
| Linux               |     1 |
| OS X 10.10 Yosemite |     1 |
| OS X 10.9 Mavericks |     1 |
| Windows 8           |     1 |
| Windows Vista       |     1 |
+---------------------+-------+
(12 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
|                 |     8 |
| 12.0            |     5 |
| 12.1.1          |    15 |
| 12.1.2          |    51 |
+-----------------+-------+
(4 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL) AND CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) IN ('Windows','iOS'))
GROUP BY 1,2;
+-----------------+---------+-------+
| Browser_Version | Os      | count |
+-----------------+---------+-------+
|                 | iOS     |    76 |
| 12.1.1          | iOS     |   157 |
| 12.1.2          | iOS     |   508 |
| 64.0.3282.140   | Windows |   147 |
| 75.0.3770.142   | Windows |    15 |
| 76.0.3809.100   | Windows |   701 |
+-----------------+---------+-------+
(6 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL) AND CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) IN ('Windows','iOS'))
GROUP BY 1,2;
+-----------------+----+-------+
| Browser_Version | Os | count |
+-----------------+----+-------+
+-----------------+----+-------+
(0 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='Windows')))) AS "v0",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='Windows')))) AS "v1",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='Windows')))) AS "v2",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='Windows')))) AS "v3",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS')))) AS "v4",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS')))) AS "v5",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS')))) AS "v6",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS')))) AS "v7"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL) AND CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) IN ('Windows','iOS'))
GROUP BY ();
+-----+----+-----+----+-----+----+-----+----+
| v0  | v1 | v2  | v3 | v4  | v5 | v6  | v7 |
+-----+----+-----+----+-----+----+-----+----+
| 925 |  0 | 925 |  0 | 857 |  0 | 857 |  0 |
+-----+----+-----+----+-----+----+-----+----+
(1 row)

!ok
# Wed Jul 10 19:08:09 IST 2024
SELECT
(SUM(t."session_length") FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(SUM(t."session_length") FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1",
(SUM(t."session_length") FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')))) AS "v2",
(SUM(t."session_length") FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')))) AS "v3",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.100')))) AS "v4",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.100')))) AS "v5",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.2')))) AS "v6",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.2')))) AS "v7",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.111')))) AS "v8",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.111')))) AS "v9",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.102')))) AS "v10",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.102')))) AS "v11",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.144')))) AS "v12",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.144')))) AS "v13",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.1')))) AS "v14",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.1')))) AS "v15",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='64.0.3282.140')))) AS "v16",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='64.0.3282.140')))) AS "v17",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='')))) AS "v18",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='')))) AS "v19",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.142')))) AS "v20",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.142')))) AS "v21",
(SUM(t."session_length") FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v22",
(SUM(t."session_length") FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v23",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v24",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v25",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.100')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v26",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.100')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v27",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.2')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v28",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.2')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v29",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.111')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v30",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.111')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v31",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.102')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v32",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.102')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v33",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.144')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v34",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.144')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v35",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.1')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v36",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.1')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v37",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='64.0.3282.140')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v38",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='64.0.3282.140')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v39",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v40",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v41",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.142')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v42",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.142')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v43"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY ();
+------------+----+------------+----+-----------+----+-----------+----+----------+----+----------+-----+----------+-----+----------+-----+----------+-----+---------+-----+----------+-----+------------+-----+------------+-----+-----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+
| v0         | v1 | v2         | v3 | v4        | v5 | v6        | v7 | v8       | v9 | v10      | v11 | v12      | v13 | v14      | v15 | v16      | v17 | v18     | v19 | v20      | v21 | v22        | v23 | v24        | v25 | v26       | v27 | v28      | v29 | v30      | v31 | v32      | v33 | v34      | v35 | v36      | v37 | v38      | v39 | v40     | v41 | v42     | v43 |
+------------+----+------------+----+-----------+----+-----------+----+----------+----+----------+-----+----------+-----+----------+-----+----------+-----+---------+-----+----------+-----+------------+-----+------------+-----+-----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+
| 1115718568 |    | 1115718568 |    | 644448975 |    | 113437114 |    | 25498009 |    | 93322742 |     | 85862999 |     | 20411857 |     | 34840919 |     | 8341549 |     | 16086598 |     | 1013756731 |     | 1013756731 |     | 615157776 |     | 88994579 |     | 18234940 |     | 86989288 |     | 79950104 |     | 17079430 |     | 32491441 |     | 7385299 |     | 8719072 |     |
+------------+----+------------+----+-----------+----+-----------+----+----------+----+----------+-----+----------+-----+----------+-----+----------+-----+---------+-----+----------+-----+------------+-----+------------+-----+-----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+
(1 row)

!ok
