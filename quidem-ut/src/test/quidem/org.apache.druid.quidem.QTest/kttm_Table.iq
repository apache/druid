#started Wed Jul 10 17:02:53 IST 2024
!use druidtest:///?componentSupplier=KttmNestedComponentSupplier
!set outputformat mysql
# Wed Jul 10 19:07:21 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:58.044 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 19:07:21 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:58.044 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 19:07:21 IST 2024
SELECT
(COUNT(*)) AS "__VALUE__"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY ();
+-----------+
| __VALUE__ |
+-----------+
|      4519 |
+-----------+
(1 row)

!ok
# Wed Jul 10 19:07:30 IST 2024
SELECT
CAST(t."app_version" AS VARCHAR) AS "app_version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------------+-------+
| app_version | count |
+-------------+-------+
| 1.9.6       |  4519 |
+-------------+-------+
(1 row)

!ok
# Wed Jul 10 19:07:31 IST 2024
SELECT
(COUNT(*)) AS "__VALUE__"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6'))
GROUP BY ();
+-----------+
| __VALUE__ |
+-----------+
|      4519 |
+-----------+
(1 row)

!ok
# Wed Jul 10 19:07:35 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
| 76.0.3809.100   |  1331 |
| 12.1.2          |   814 |
| 76.0.3809.111   |   451 |
| 12.1.1          |   248 |
| 76.0.3809.102   |   198 |
| 64.0.3282.140   |   197 |
| 75.0.3770.144   |   182 |
|                 |    85 |
| 68.0            |    61 |
| 75.0.3770.142   |    57 |
| 12.0            |    56 |
| 67.0.3396.87    |    54 |
| 12.1            |    49 |
| 70.0.3538.102   |    42 |
| 11.0            |    38 |
| 74.0.3729.159   |    33 |
| 11.1.2          |    32 |
| 75.0.3770.100   |    32 |
| 12.0.3          |    30 |
| 10.1.2          |    18 |
| 76.0.3809.123   |    18 |
| 19.7.3.172      |    17 |
| 49.0.2623.112   |    17 |
| 63.0.3239.132   |    17 |
| 76.0.3809.89    |    17 |
| 13.0            |    15 |
| rv:11.0         |    15 |
| 12.0.1          |    12 |
| 75.0.3770.129   |    12 |
| 12.0.2          |    11 |
| 74.0.3729.125   |    11 |
| 75.0.3770.101   |    11 |
| 75.0.3770.143   |    11 |
| 10.0            |    10 |
| 19.7.2.516      |    10 |
| 62.0.3331.116   |    10 |
| 73.0.3683.86    |    10 |
| 74.0.3729.169   |    10 |
| 74.0.3729.157   |     9 |
| 76.2.1          |     9 |
| 19.7.1.114      |     8 |
| 72.0.3626.121   |     8 |
| 52.0.2743.116   |     7 |
| 67.0.3396.99    |     7 |
| 75.0.3770.102   |     7 |
| 69.0.3497.128   |     6 |
| 76.0.3809.87    |     6 |
| 11.0.3          |     5 |
| 70.0.3538.110   |     5 |
| 71.0.3578.99    |     5 |
| 73.0.3683.114   |     5 |
| 73.0.3683.90    |     5 |
| 9.1.3           |     5 |
| 46.0.2486.0     |     4 |
| 58.0.3029.110   |     4 |
| 69.0.3497.100   |     4 |
| 70.0.3538.77    |     4 |
| 71.0.3578.127   |     4 |
| 71.0.3578.98    |     4 |
| 9.0             |     4 |
| 11.1            |     3 |
| 19.7.3.91.00    |     3 |
| 48.0            |     3 |
| 58.0.3029.140   |     3 |
| 6.1.6           |     3 |
| 62.0.3331.132   |     3 |
| 63.0.3368.43    |     3 |
| 64.0.3282.137   |     3 |
| 65.0.3325.181   |     3 |
| 66.0.3359.126   |     3 |
| 67.0            |     3 |
| 70.0.3538.80    |     3 |
| 71.0.3578.141   |     3 |
| 72.0.3626.109   |     3 |
| 72.0.3626.117   |     3 |
| 72.0.3626.122   |     3 |
| 74.0.3729.131   |     3 |
| 74.0.3729.180   |     3 |
| 76.0.3809.81    |     3 |
| 10.1.1          |     2 |
| 11.1.1          |     2 |
| 5.1.9           |     2 |
| 51.0.2704.79    |     2 |
| 56.0.2924.87    |     2 |
| 57.0            |     2 |
| 57.0.2987.110   |     2 |
| 58.0.2988.0     |     2 |
| 58.0.3012.0     |     2 |
| 60.0            |     2 |
| 62.0.3331.119   |     2 |
| 63.0.3239.111   |     2 |
| 63.0.3368.35    |     2 |
| 65.0.3325.209   |     2 |
| 66.0.3359.181   |     2 |
| 68.0.3440.106   |     2 |
| 70.0.3538.76    |     2 |
| 73.0.3683.103   |     2 |
| 73.0.3683.88    |     2 |
| 74.0.3729.108   |     2 |
| 74.0.3729.136   |     2 |
| 75.0.3770.80    |     2 |
| 75.0.3770.89    |     2 |
| 78.0.3879.0     |     2 |
| 10.0.1          |     1 |
| 10.0.2          |     1 |
| 10.1            |     1 |
| 17.1.0.2034     |     1 |
| 18.4.1.871      |     1 |
| 18.6.1.770      |     1 |
| 19.3.1.333.00   |     1 |
| 19.4.2.702      |     1 |
| 19.6.3.318.00   |     1 |
| 19.7.1.93.00    |     1 |
| 19.7.2.90.00    |     1 |
| 19.9.1.167.10   |     1 |
| 36.0.1985.125   |     1 |
| 38.0.2125.102   |     1 |
| 38.0.2125.111   |     1 |
| 42.0.2311.135   |     1 |
| 5.2.2           |     1 |
| 51.0.2704.84    |     1 |
| 52.0            |     1 |
| 53.0.2785.154   |     1 |
| 55.0.2883.87    |     1 |
| 58.0.3029.83    |     1 |
| 59.0.3071.125   |     1 |
| 60.0.3255.69    |     1 |
| 60.0.3255.95    |     1 |
| 61.0.3163.120   |     1 |
| 63.0.3239.73    |     1 |
| 65.0.3325.109   |     1 |
| 66.0            |     1 |
| 68.0.3440.91    |     1 |
| 69.0.3497.120   |     1 |
| 69.0.3497.95    |     1 |
| 70.0.3538.25    |     1 |
| 71.0.3578.89    |     1 |
| 72.0.3626.105   |     1 |
| 72.0.3626.120   |     1 |
| 72.0.3626.76    |     1 |
| 72.0.3626.81    |     1 |
| 72.0.3626.96    |     1 |
| 74.0.3729.141   |     1 |
| 75.0.3770.90    |     1 |
| 77.0.3865.18    |     1 |
| 77.0.3865.35    |     1 |
| 78.0.3877.0     |     1 |
| 8.0.5           |     1 |
| 8.0.8           |     1 |
| 9.1.2           |     1 |
+-----------------+-------+
(150 rows)

!ok
# Wed Jul 10 19:07:35 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','12.1.1','76.0.3809.102','75.0.3770.144','64.0.3282.140','','68.0','12.0','75.0.3770.142','67.0.3396.87','12.1','70.0.3538.102','74.0.3729.159','11.0','75.0.3770.100','11.1.2'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
|                 |    85 |
| 11.0            |    38 |
| 11.1.2          |    32 |
| 12.0            |    56 |
| 12.1            |    49 |
| 12.1.1          |   248 |
| 12.1.2          |   814 |
| 64.0.3282.140   |   197 |
| 67.0.3396.87    |    54 |
| 68.0            |    61 |
| 70.0.3538.102   |    42 |
| 74.0.3729.159   |    33 |
| 75.0.3770.100   |    32 |
| 75.0.3770.142   |    57 |
| 75.0.3770.144   |   182 |
| 76.0.3809.100   |  1331 |
| 76.0.3809.102   |   198 |
| 76.0.3809.111   |   451 |
+-----------------+-------+
(18 rows)

!ok
# Wed Jul 10 19:07:40 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','12.1.1','76.0.3809.102','75.0.3770.144','64.0.3282.140','','68.0','12.0','75.0.3770.142'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
+-----------------+-------+
(0 rows)

!ok
# Wed Jul 10 19:07:40 IST 2024
SELECT
(COUNT(*)) AS "v0",
(COUNT(*) FILTER (WHERE (CAST(t."app_version" AS VARCHAR)='1.9.6'))) AS "v1"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00')
GROUP BY ();
+----+----+
| v0 | v1 |
+----+----+
|  0 |  0 |
+----+----+
(1 row)

!ok
# Wed Jul 10 19:07:45 IST 2024
SELECT
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------+-------+
| Layer | count |
+-------+-------+
|       |  3349 |
| 6     |   314 |
| 5     |   286 |
| 4     |   245 |
| 3     |   141 |
| 2     |   103 |
| 1     |    53 |
| 0     |    28 |
+-------+-------+
(8 rows)

!ok
# Wed Jul 10 19:07:45 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','12.1.1','76.0.3809.102','75.0.3770.144','64.0.3282.140','','68.0','12.0','75.0.3770.142')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY 1,2;
+-----------------+-------+-------+
| Browser_Version | Layer | count |
+-----------------+-------+-------+
| 12.0            | 5     |     4 |
| 12.1.1          | 6     |    21 |
| 75.0.3770.142   | 5     |     1 |
| 76.0.3809.100   | 5     |    71 |
|                 | 5     |     7 |
|                 | 6     |     3 |
|                 |       |    69 |
| 12.0            | 6     |     4 |
| 12.0            |       |    43 |
| 12.1.1          | 5     |    17 |
| 12.1.1          |       |   187 |
| 12.1.2          | 5     |    52 |
| 12.1.2          | 6     |    65 |
| 12.1.2          |       |   591 |
| 64.0.3282.140   | 5     |    14 |
| 64.0.3282.140   | 6     |     4 |
| 64.0.3282.140   |       |   154 |
| 68.0            | 5     |     2 |
| 68.0            | 6     |     4 |
| 68.0            |       |    41 |
| 75.0.3770.142   | 6     |     2 |
| 75.0.3770.142   |       |    47 |
| 75.0.3770.144   | 5     |    11 |
| 75.0.3770.144   | 6     |     7 |
| 75.0.3770.144   |       |   132 |
| 76.0.3809.100   | 6     |    86 |
| 76.0.3809.100   |       |  1000 |
| 76.0.3809.102   | 5     |    17 |
| 76.0.3809.102   | 6     |     9 |
| 76.0.3809.102   |       |   146 |
| 76.0.3809.111   | 5     |    39 |
| 76.0.3809.111   | 6     |    46 |
| 76.0.3809.111   |       |   330 |
+-----------------+-------+-------+
(33 rows)

!ok
# Wed Jul 10 19:07:45 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','12.1.1','76.0.3809.102','75.0.3770.144','64.0.3282.140','','68.0','12.0','75.0.3770.142')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY 1,2;
+-----------------+-------+-------+
| Browser_Version | Layer | count |
+-----------------+-------+-------+
+-----------------+-------+-------+
(0 rows)

!ok
# Wed Jul 10 19:07:45 IST 2024
SELECT
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v0",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v1",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v2",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v3",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v4",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v5",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v6",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v7",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v8",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v9",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v10",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v11"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY ();
+------+----+------+----+-----+----+-----+----+-----+----+-----+-----+
| v0   | v1 | v2   | v3 | v4  | v5 | v6  | v7 | v8  | v9 | v10 | v11 |
+------+----+------+----+-----+----+-----+----+-----+----+-----+-----+
| 3349 |  0 | 3349 |  0 | 314 |  0 | 314 |  0 | 286 |  0 | 286 |   0 |
+------+----+------+----+-----+----+-----+----+-----+----+-----+-----+
(1 row)

!ok
# Wed Jul 10 19:07:49 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "r"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "r" DESC
LIMIT 101;
+-----------------------+------+
| Browser               | r    |
+-----------------------+------+
| Chrome                | 2313 |
| Mobile Safari         | 1052 |
| Chrome Mobile         |  589 |
| Safari                |  386 |
| Firefox               |   72 |
| Yandex.Browser        |   39 |
| Opera                 |   22 |
| Mozilla               |   15 |
| IE                    |   10 |
| Silk                  |    9 |
| Yandex.Browser mobile |    8 |
| PS4 Web browser       |    2 |
| Mobile Firefox        |    1 |
| Puffin                |    1 |
+-----------------------+------+
(14 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(t."app_version" AS VARCHAR) AS "app_version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------------+-------+
| app_version | count |
+-------------+-------+
| 1.9.6       |  3954 |
+-------------+-------+
(1 row)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY ();
+------+----+
| v0   | v1 |
+------+----+
| 3954 |  0 |
+------+----+
(1 row)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------+-------+
| Layer | count |
+-------+-------+
|       |  2953 |
| 6     |   276 |
| 5     |   253 |
| 4     |   201 |
| 3     |   125 |
| 2     |    85 |
| 1     |    41 |
| 0     |    20 |
+-------+-------+
(8 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
| 76.0.3809.100   |  1331 |
| 12.1.2          |   661 |
| 76.0.3809.111   |   451 |
| 76.0.3809.102   |   198 |
| 64.0.3282.140   |   197 |
| 75.0.3770.144   |   182 |
| 12.1.1          |   175 |
|                 |    83 |
| 75.0.3770.142   |    57 |
| 67.0.3396.87    |    54 |
| 12.0            |    46 |
| 70.0.3538.102   |    42 |
| 12.1            |    35 |
| 74.0.3729.159   |    33 |
| 75.0.3770.100   |    32 |
| 11.0            |    25 |
| 76.0.3809.123   |    18 |
| 49.0.2623.112   |    17 |
| 63.0.3239.132   |    17 |
| 76.0.3809.89    |    17 |
| 13.0            |    14 |
| 75.0.3770.129   |    12 |
| 74.0.3729.125   |    11 |
| 75.0.3770.101   |    11 |
| 75.0.3770.143   |    11 |
| 73.0.3683.86    |    10 |
| 74.0.3729.169   |    10 |
| 10.0            |     9 |
| 74.0.3729.157   |     9 |
| 72.0.3626.121   |     8 |
| 52.0.2743.116   |     7 |
| 67.0.3396.99    |     7 |
| 75.0.3770.102   |     7 |
| 69.0.3497.128   |     6 |
| 76.0.3809.87    |     6 |
| 70.0.3538.110   |     5 |
| 71.0.3578.99    |     5 |
| 73.0.3683.114   |     5 |
| 73.0.3683.90    |     5 |
| 46.0.2486.0     |     4 |
| 58.0.3029.110   |     4 |
| 69.0.3497.100   |     4 |
| 70.0.3538.77    |     4 |
| 71.0.3578.127   |     4 |
| 71.0.3578.98    |     4 |
| 9.0             |     4 |
| 58.0.3029.140   |     3 |
| 64.0.3282.137   |     3 |
| 65.0.3325.181   |     3 |
| 66.0.3359.126   |     3 |
| 70.0.3538.80    |     3 |
| 71.0.3578.141   |     3 |
| 72.0.3626.109   |     3 |
| 72.0.3626.117   |     3 |
| 72.0.3626.122   |     3 |
| 74.0.3729.131   |     3 |
| 74.0.3729.180   |     3 |
| 76.0.3809.81    |     3 |
| 51.0.2704.79    |     2 |
| 56.0.2924.87    |     2 |
| 57.0.2987.110   |     2 |
| 58.0.2988.0     |     2 |
| 58.0.3012.0     |     2 |
| 63.0.3239.111   |     2 |
| 65.0.3325.209   |     2 |
| 66.0.3359.181   |     2 |
| 68.0.3440.106   |     2 |
| 70.0.3538.76    |     2 |
| 73.0.3683.103   |     2 |
| 73.0.3683.88    |     2 |
| 74.0.3729.108   |     2 |
| 74.0.3729.136   |     2 |
| 75.0.3770.80    |     2 |
| 75.0.3770.89    |     2 |
| 78.0.3879.0     |     2 |
| 36.0.1985.125   |     1 |
| 38.0.2125.102   |     1 |
| 38.0.2125.111   |     1 |
| 42.0.2311.135   |     1 |
| 51.0.2704.84    |     1 |
| 53.0.2785.154   |     1 |
| 55.0.2883.87    |     1 |
| 58.0.3029.83    |     1 |
| 59.0.3071.125   |     1 |
| 61.0.3163.120   |     1 |
| 63.0.3239.73    |     1 |
| 65.0.3325.109   |     1 |
| 68.0.3440.91    |     1 |
| 69.0.3497.120   |     1 |
| 69.0.3497.95    |     1 |
| 70.0.3538.25    |     1 |
| 71.0.3578.89    |     1 |
| 72.0.3626.105   |     1 |
| 72.0.3626.120   |     1 |
| 72.0.3626.76    |     1 |
| 72.0.3626.81    |     1 |
| 72.0.3626.96    |     1 |
| 74.0.3729.141   |     1 |
| 75.0.3770.90    |     1 |
| 77.0.3865.18    |     1 |
| 77.0.3865.35    |     1 |
| 78.0.3877.0     |     1 |
+-----------------+-------+
(102 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')))) AS "v0",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')))) AS "v1",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v2",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v3",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v4",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v5",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v6",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v7",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v8",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')))) AS "v9",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v10",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v11",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v12",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5')))) AS "v13"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY ();
+------+----+------+----+------+----+-----+----+-----+----+-----+-----+-----+-----+
| v0   | v1 | v2   | v3 | v4   | v5 | v6  | v7 | v8  | v9 | v10 | v11 | v12 | v13 |
+------+----+------+----+------+----+-----+----+-----+----+-----+-----+-----+-----+
| 3954 |  0 | 2953 |  0 | 2953 |  0 | 276 |  0 | 276 |  0 | 253 |   0 | 253 |   0 |
+------+----+------+----+------+----+-----+----+-----+----+-----+-----+-----+-----+
(1 row)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY 1,2;
+-----------------+-------+-------+
| Browser_Version | Layer | count |
+-----------------+-------+-------+
| 12.0            | 5     |     3 |
| 67.0.3396.87    | 5     |     3 |
| 75.0.3770.142   | 5     |     1 |
| 76.0.3809.100   | 5     |    71 |
|                 | 5     |     6 |
|                 | 6     |     3 |
|                 |       |    68 |
| 12.0            | 6     |     2 |
| 12.0            |       |    37 |
| 12.1.1          | 5     |    13 |
| 12.1.1          | 6     |    16 |
| 12.1.1          |       |   134 |
| 12.1.2          | 5     |    44 |
| 12.1.2          | 6     |    52 |
| 12.1.2          |       |   483 |
| 64.0.3282.140   | 5     |    14 |
| 64.0.3282.140   | 6     |     4 |
| 64.0.3282.140   |       |   154 |
| 67.0.3396.87    | 6     |     9 |
| 67.0.3396.87    |       |    38 |
| 75.0.3770.142   | 6     |     2 |
| 75.0.3770.142   |       |    47 |
| 75.0.3770.144   | 5     |    11 |
| 75.0.3770.144   | 6     |     7 |
| 75.0.3770.144   |       |   132 |
| 76.0.3809.100   | 6     |    86 |
| 76.0.3809.100   |       |  1000 |
| 76.0.3809.102   | 5     |    17 |
| 76.0.3809.102   | 6     |     9 |
| 76.0.3809.102   |       |   146 |
| 76.0.3809.111   | 5     |    39 |
| 76.0.3809.111   | 6     |    46 |
| 76.0.3809.111   |       |   330 |
+-----------------+-------+-------+
(33 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) AS "Layer",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL OR CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IN ('6','5')))
GROUP BY 1,2;
+-----------------+-------+-------+
| Browser_Version | Layer | count |
+-----------------+-------+-------+
+-----------------+-------+-------+
(0 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
|                 |    83 |
| 12.0            |    46 |
| 12.1.1          |   175 |
| 12.1.2          |   661 |
| 64.0.3282.140   |   197 |
| 67.0.3396.87    |    54 |
| 75.0.3770.142   |    57 |
| 75.0.3770.144   |   182 |
| 76.0.3809.100   |  1331 |
| 76.0.3809.102   |   198 |
| 76.0.3809.111   |   451 |
+-----------------+-------+
(11 rows)

!ok
# Wed Jul 10 19:07:53 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
+-----------------+-------+
(0 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+---------------------+-------+
| Os                  | count |
+---------------------+-------+
| iOS                 |    80 |
| Windows             |    68 |
| Android             |    63 |
| Chrome OS           |    26 |
| Windows 7           |    15 |
| OS X                |    13 |
| Windows 8.1         |     6 |
| OS X 10.7 Lion      |     2 |
| OS X 10.10 Yosemite |     1 |
| OS X 10.9 Mavericks |     1 |
| Windows 8           |     1 |
+---------------------+-------+
(11 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL)
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-------------------------+-------+
| Os                      | count |
+-------------------------+-------+
| Windows                 |   920 |
| iOS                     |   804 |
| Android                 |   428 |
| Chrome OS               |   342 |
| OS X                    |   185 |
| Windows 7               |   155 |
| Windows 8.1             |    66 |
| OS X 10.10 Yosemite     |    14 |
| Linux                   |     8 |
| Android 4.4 KitKat      |     7 |
| Windows Vista           |     6 |
| OS X 10.7 Lion          |     4 |
| OS X 10.8 Mountain Lion |     4 |
| OS X 10.9 Mavericks     |     4 |
| Windows 8               |     4 |
| Android 4.2 Jelly Bean  |     1 |
| Windows XP              |     1 |
+-------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='5'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+---------------------+-------+
| Os                  | count |
+---------------------+-------+
| iOS                 |    73 |
| Windows             |    64 |
| Android             |    45 |
| Chrome OS           |    36 |
| OS X                |    16 |
| Windows 7           |    13 |
| Windows 8.1         |     3 |
| OS X 10.10 Yosemite |     2 |
| Linux               |     1 |
+---------------------+-------+
(9 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87','12.0')) AND (CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR)='6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS'))
GROUP BY 1;
+-----------------+-------+
| Browser_Version | count |
+-----------------+-------+
|                 |     3 |
| 12.0            |     2 |
| 12.1.1          |    16 |
| 12.1.2          |    52 |
+-----------------+-------+
(4 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL) AND CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) IN ('Windows','iOS'))
GROUP BY 1,2;
+-----------------+---------+-------+
| Browser_Version | Os      | count |
+-----------------+---------+-------+
|                 | iOS     |    68 |
| 12.1.1          | iOS     |   134 |
| 12.1.2          | iOS     |   483 |
| 64.0.3282.140   | Windows |   154 |
| 75.0.3770.142   | Windows |     8 |
| 76.0.3809.100   | Windows |   671 |
+-----------------+---------+-------+
(6 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) AS "Browser_Version",
CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) AS "Os",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR) IN ('76.0.3809.100','12.1.2','76.0.3809.111','76.0.3809.102','75.0.3770.144','12.1.1','64.0.3282.140','','75.0.3770.142','67.0.3396.87')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL) AND CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) IN ('Windows','iOS'))
GROUP BY 1,2;
+-----------------+----+-------+
| Browser_Version | Os | count |
+-----------------+----+-------+
+-----------------+----+-------+
(0 rows)

!ok
# Wed Jul 10 19:08:00 IST 2024
SELECT
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='Windows')))) AS "v0",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='Windows')))) AS "v1",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='Windows')))) AS "v2",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='Windows')))) AS "v3",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS')))) AS "v4",
(COUNT(*) FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS')))) AS "v5",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS')))) AS "v6",
(COUNT(*) FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR)='iOS')))) AS "v7"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL) AND CAST(JSON_VALUE("t"."agent",'$.os') AS VARCHAR) IN ('Windows','iOS'))
GROUP BY ();
+-----+----+-----+----+-----+----+-----+----+
| v0  | v1 | v2  | v3 | v4  | v5 | v6  | v7 |
+-----+----+-----+----+-----+----+-----+----+
| 920 |  0 | 920 |  0 | 804 |  0 | 804 |  0 |
+-----+----+-----+----+-----+----+-----+----+
(1 row)

!ok
# Wed Jul 10 19:08:09 IST 2024
SELECT
(SUM(t."session_length") FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(SUM(t."session_length") FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1",
(SUM(t."session_length") FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')))) AS "v2",
(SUM(t."session_length") FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')))) AS "v3",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.100')))) AS "v4",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.100')))) AS "v5",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.2')))) AS "v6",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.2')))) AS "v7",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.111')))) AS "v8",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.111')))) AS "v9",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.102')))) AS "v10",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.102')))) AS "v11",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.144')))) AS "v12",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.144')))) AS "v13",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.1')))) AS "v14",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.1')))) AS "v15",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='64.0.3282.140')))) AS "v16",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='64.0.3282.140')))) AS "v17",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='')))) AS "v18",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='')))) AS "v19",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.142')))) AS "v20",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.142')))) AS "v21",
(SUM(t."session_length") FILTER (WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v22",
(SUM(t."session_length") FILTER (WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v23",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v24",
(SUM(t."session_length") FILTER (WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v25",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.100')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v26",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.100')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v27",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.2')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v28",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.2')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v29",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.111')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v30",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.111')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v31",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.102')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v32",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='76.0.3809.102')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v33",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.144')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v34",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.144')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v35",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.1')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v36",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='12.1.1')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v37",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='64.0.3282.140')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v38",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='64.0.3282.140')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v39",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v40",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v41",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.142')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v42",
(SUM(t."session_length") FILTER (WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND (CAST(JSON_VALUE("t"."agent",'$.browser_version') AS VARCHAR)='75.0.3770.142')) AND CAST(JSON_VALUE("t"."event",'$.layer') AS VARCHAR) IS NULL))) AS "v43"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile'))
GROUP BY ();
+------------+----+------------+----+------------+----+----------+----+----------+----+-----------+-----+-----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+------------+-----+------------+-----+-----------+-----+----------+-----+----------+-----+-----------+-----+-----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+
| v0         | v1 | v2         | v3 | v4         | v5 | v6       | v7 | v8       | v9 | v10       | v11 | v12       | v13 | v14      | v15 | v16      | v17 | v18     | v19 | v20     | v21 | v22        | v23 | v24        | v25 | v26       | v27 | v28      | v29 | v30      | v31 | v32       | v33 | v34       | v35 | v36      | v37 | v38      | v39 | v40     | v41 | v42     | v43 |
+------------+----+------------+----+------------+----+----------+----+----------+----+-----------+-----+-----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+------------+-----+------------+-----+-----------+-----+----------+-----+----------+-----+-----------+-----+-----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+
| 1832832851 |    | 1832832851 |    | 1035732955 |    | 90206360 |    | 22552379 |    | 126228098 |     | 214242179 |     | 17317056 |     | 25103835 |     | 5865337 |     | 9761518 |     | 1481115955 |     | 1481115955 |     | 742762393 |     | 67839519 |     | 17483157 |     | 119676362 |     | 208654546 |     | 15451658 |     | 21446016 |     | 4988946 |     | 8882628 |     |
+------------+----+------------+----+------------+----+----------+----+----------+----+-----------+-----+-----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+------------+-----+------------+-----+-----------+-----+----------+-----+----------+-----+-----------+-----+-----------+-----+----------+-----+----------+-----+---------+-----+---------+-----+
(1 row)

!ok
