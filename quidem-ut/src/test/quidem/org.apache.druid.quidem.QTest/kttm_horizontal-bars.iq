#started Wed Jul 10 16:23:38 IST 2024
!use druidtest:///?componentSupplier=KttmNestedComponentSupplier
!set outputformat mysql
# Wed Jul 10 16:24:06 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:34.290 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 16:24:06 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:34.290 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 16:24:06 IST 2024
SELECT
(COUNT(*)) AS "__VALUE__"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2024-07-09 10:55:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2024-07-10 10:55:00')
GROUP BY ();
+-----------+
| __VALUE__ |
+-----------+
|         0 |
+-----------+
(1 row)

!ok
# Wed Jul 10 16:24:06 IST 2024
SELECT
(COUNT(*)) AS "__VALUE__"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY ();
+-----------+
| __VALUE__ |
+-----------+
|      4681 |
+-----------+
(1 row)

!ok
# Wed Jul 10 16:24:21 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------------+-------+
| Browser               | count |
+-----------------------+-------+
| Chrome                |  2395 |
| Mobile Safari         |  1129 |
| Chrome Mobile         |   597 |
| Safari                |   376 |
| Firefox               |    76 |
| Yandex.Browser        |    38 |
| Opera                 |    28 |
| Mozilla               |    11 |
| Silk                  |    11 |
| IE                    |     8 |
| Yandex.Browser mobile |     4 |
| Mobile Firefox        |     3 |
| Puffin                |     2 |
| Android browser       |     1 |
| Chromium              |     1 |
| PS4 Web browser       |     1 |
+-----------------------+-------+
(16 rows)

!ok
# Wed Jul 10 16:24:21 IST 2024
SELECT
(COUNT(*)) AS "__VALUE__"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR)='Chrome'))
GROUP BY ();
+-----------+
| __VALUE__ |
+-----------+
|      2395 |
+-----------+
(1 row)

!ok
# Wed Jul 10 16:24:21 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Chromium','Waterfox','Opera Mobile','PS4 Web browser','Android browser','Sogou Explorer','IE Mobile','Maxthon','PS Vita browser','unknown','','Apple Mail'))
GROUP BY 1;
+-----------------------+-------+
| Browser               | count |
+-----------------------+-------+
| Android browser       |     1 |
| Chrome Mobile         |   597 |
| Chromium              |     1 |
| Firefox               |    76 |
| IE                    |     8 |
| Mobile Firefox        |     3 |
| Mobile Safari         |  1129 |
| Mozilla               |    11 |
| Opera                 |    28 |
| PS4 Web browser       |     1 |
| Puffin                |     2 |
| Safari                |   376 |
| Silk                  |    11 |
| Yandex.Browser        |    38 |
| Yandex.Browser mobile |     4 |
+-----------------------+-------+
(15 rows)

!ok
# Wed Jul 10 16:24:25 IST 2024
SELECT
CAST(t."app_version" AS VARCHAR) AS "app_version",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 10;
+-------------+-------+
| app_version | count |
+-------------+-------+
| 1.9.6       |  4681 |
+-------------+-------+
(1 row)

!ok
# Wed Jul 10 16:24:25 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Chromium','Waterfox','Opera Mobile','PS4 Web browser','Android browser','Sogou Explorer','IE Mobile','Maxthon','PS Vita browser','unknown','','Apple Mail')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6'))
GROUP BY 1;
+-----------------------+-------+
| Browser               | count |
+-----------------------+-------+
| Android browser       |     1 |
| Chrome                |  2395 |
| Chrome Mobile         |   597 |
| Chromium              |     1 |
| Firefox               |    76 |
| IE                    |     8 |
| Mobile Firefox        |     3 |
| Mobile Safari         |  1129 |
| Mozilla               |    11 |
| Opera                 |    28 |
| PS4 Web browser       |     1 |
| Puffin                |     2 |
| Safari                |   376 |
| Silk                  |    11 |
| Yandex.Browser        |    38 |
| Yandex.Browser mobile |     4 |
+-----------------------+-------+
(16 rows)

!ok
# Wed Jul 10 16:24:30 IST 2024
SELECT
CAST(t."adblock_list" AS VARCHAR) AS "adblock_list",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+----------------------------+-------+
| adblock_list               | count |
+----------------------------+-------+
| NoAdblock                  |  4239 |
| EasyList                   |   439 |
| EasyList,AntiAdblockKiller |     3 |
+----------------------------+-------+
(3 rows)

!ok
# Wed Jul 10 16:24:30 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Chromium','Waterfox','Opera Mobile','PS4 Web browser','Android browser','Sogou Explorer','IE Mobile','Maxthon','PS Vita browser','unknown','','Apple Mail')) AND (CAST(t."adblock_list" AS VARCHAR)='NoAdblock'))
GROUP BY 1;
+-----------------------+-------+
| Browser               | count |
+-----------------------+-------+
| Android browser       |     1 |
| Chrome                |  2007 |
| Chrome Mobile         |   595 |
| Firefox               |    49 |
| IE                    |     8 |
| Mobile Firefox        |     3 |
| Mobile Safari         |  1124 |
| Mozilla               |    11 |
| Opera                 |    14 |
| PS4 Web browser       |     1 |
| Puffin                |     2 |
| Safari                |   373 |
| Silk                  |    11 |
| Yandex.Browser        |    36 |
| Yandex.Browser mobile |     4 |
+-----------------------+-------+
(15 rows)

!ok
# Wed Jul 10 16:24:30 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
CAST(t."adblock_list" AS VARCHAR) AS "adblock_list",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Chromium','Waterfox','Opera Mobile','PS4 Web browser','Android browser','Sogou Explorer','IE Mobile','Maxthon','PS Vita browser','unknown','','Apple Mail')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(t."adblock_list" AS VARCHAR) IN ('NoAdblock','EasyList','EasyList,AntiAdblockKiller'))
GROUP BY 1,2;
+-----------------------+----------------------------+-------+
| Browser               | adblock_list               | count |
+-----------------------+----------------------------+-------+
| Android browser       | NoAdblock                  |     1 |
| Chrome                | EasyList                   |   387 |
| Chrome                | EasyList,AntiAdblockKiller |     1 |
| Chrome                | NoAdblock                  |  2007 |
| Chrome Mobile         | EasyList                   |     2 |
| Chrome Mobile         | NoAdblock                  |   595 |
| Chromium              | EasyList                   |     1 |
| Firefox               | EasyList                   |    25 |
| Firefox               | EasyList,AntiAdblockKiller |     2 |
| Firefox               | NoAdblock                  |    49 |
| IE                    | NoAdblock                  |     8 |
| Mobile Firefox        | NoAdblock                  |     3 |
| Mobile Safari         | EasyList                   |     5 |
| Mobile Safari         | NoAdblock                  |  1124 |
| Mozilla               | NoAdblock                  |    11 |
| Opera                 | EasyList                   |    14 |
| Opera                 | NoAdblock                  |    14 |
| PS4 Web browser       | NoAdblock                  |     1 |
| Puffin                | NoAdblock                  |     2 |
| Safari                | EasyList                   |     3 |
| Safari                | NoAdblock                  |   373 |
| Silk                  | NoAdblock                  |    11 |
| Yandex.Browser        | EasyList                   |     2 |
| Yandex.Browser        | NoAdblock                  |    36 |
| Yandex.Browser mobile | NoAdblock                  |     4 |
+-----------------------+----------------------------+-------+
(25 rows)

!ok
# Wed Jul 10 16:24:31 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
CAST(t."adblock_list" AS VARCHAR) AS "adblock_list",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Chromium','Waterfox','Opera Mobile','PS4 Web browser','Android browser','Sogou Explorer','IE Mobile','Maxthon','PS Vita browser','unknown','','Apple Mail')) AND CAST(t."adblock_list" AS VARCHAR) IN ('EasyList','EasyList,AntiAdblockKiller'))
GROUP BY 1,2;
+----------------+----------------------------+-------+
| Browser        | adblock_list               | count |
+----------------+----------------------------+-------+
| Chrome         | EasyList                   |   387 |
| Chrome         | EasyList,AntiAdblockKiller |     1 |
| Chrome Mobile  | EasyList                   |     2 |
| Chromium       | EasyList                   |     1 |
| Firefox        | EasyList                   |    25 |
| Firefox        | EasyList,AntiAdblockKiller |     2 |
| Mobile Safari  | EasyList                   |     5 |
| Opera          | EasyList                   |    14 |
| Safari         | EasyList                   |     3 |
| Yandex.Browser | EasyList                   |     2 |
+----------------+----------------------------+-------+
(10 rows)

!ok
# Wed Jul 10 16:24:36 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
CAST(t."adblock_list" AS VARCHAR) AS "adblock_list",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Chromium','Waterfox','Opera Mobile','PS4 Web browser','Android browser','Sogou Explorer','IE Mobile','Maxthon','PS Vita browser','unknown','','Apple Mail')) AND CAST(t."adblock_list" AS VARCHAR) IN ('NoAdblock','EasyList','EasyList,AntiAdblockKiller'))
GROUP BY 1,2;
+---------+--------------+-------+
| Browser | adblock_list | count |
+---------+--------------+-------+
+---------+--------------+-------+
(0 rows)

!ok
# Wed Jul 10 16:24:37 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
CAST(t."adblock_list" AS VARCHAR) AS "adblock_list",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Chromium','Waterfox','Opera Mobile','PS4 Web browser','Android browser','Sogou Explorer','IE Mobile','Maxthon','PS Vita browser','unknown','','Apple Mail')) AND (CAST(t."app_version" AS VARCHAR)='1.9.6')) AND CAST(t."adblock_list" AS VARCHAR) IN ('NoAdblock','EasyList','EasyList,AntiAdblockKiller'))
GROUP BY 1,2;
+---------+--------------+-------+
| Browser | adblock_list | count |
+---------+--------------+-------+
+---------+--------------+-------+
(0 rows)

!ok
