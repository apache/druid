#The queries in this file were generated; see README.generated
#started Wed Jul 10 19:26:55 IST 2024
!use druidtest:///?componentSupplier=KttmNestedComponentSupplier
!set outputformat mysql
# Wed Jul 10 19:27:27 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:59.686 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 19:27:27 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:59.686 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 19:27:46 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Chrome                | 2019-08-25 00:00:00.000 |  8663 |
| Chrome                | 2019-08-25 01:00:00.000 |  7814 |
| Chrome                | 2019-08-25 02:00:00.000 |  7851 |
| Chrome                | 2019-08-25 03:00:00.000 |  7671 |
| Chrome                | 2019-08-25 04:00:00.000 |  5269 |
| Chrome                | 2019-08-25 05:00:00.000 |  4044 |
| Chrome                | 2019-08-25 06:00:00.000 |  3497 |
| Chrome                | 2019-08-25 07:00:00.000 |  2591 |
| Chrome                | 2019-08-25 08:00:00.000 |  3260 |
| Chrome                | 2019-08-25 09:00:00.000 |  3461 |
| Chrome                | 2019-08-25 10:00:00.000 |  3510 |
| Chrome                | 2019-08-25 11:00:00.000 |  3137 |
| Chrome                | 2019-08-25 12:00:00.000 |  4782 |
| Chrome                | 2019-08-25 13:00:00.000 |  6412 |
| Chrome                | 2019-08-25 14:00:00.000 |  8610 |
| Chrome                | 2019-08-25 15:00:00.000 |  7060 |
| Chrome                | 2019-08-25 16:00:00.000 | 16371 |
| Chrome Mobile         | 2019-08-25 00:00:00.000 |   998 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |  1340 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |  1355 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |  1588 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |   999 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |  1000 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |  1094 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |  1163 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |  1114 |
| Chrome Mobile         | 2019-08-25 09:00:00.000 |  1015 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |  1138 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |  1396 |
| Chrome Mobile         | 2019-08-25 12:00:00.000 |  1763 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |  2231 |
| Chrome Mobile         | 2019-08-25 14:00:00.000 |  2936 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |  1436 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |  3625 |
| Firefox               | 2019-08-25 00:00:00.000 |   406 |
| Firefox               | 2019-08-25 01:00:00.000 |   268 |
| Firefox               | 2019-08-25 02:00:00.000 |   388 |
| Firefox               | 2019-08-25 03:00:00.000 |   170 |
| Firefox               | 2019-08-25 04:00:00.000 |    69 |
| Firefox               | 2019-08-25 05:00:00.000 |   313 |
| Firefox               | 2019-08-25 06:00:00.000 |    95 |
| Firefox               | 2019-08-25 07:00:00.000 |    90 |
| Firefox               | 2019-08-25 08:00:00.000 |   185 |
| Firefox               | 2019-08-25 09:00:00.000 |   146 |
| Firefox               | 2019-08-25 10:00:00.000 |   217 |
| Firefox               | 2019-08-25 11:00:00.000 |   268 |
| Firefox               | 2019-08-25 12:00:00.000 |   401 |
| Firefox               | 2019-08-25 13:00:00.000 |   438 |
| Firefox               | 2019-08-25 14:00:00.000 |   405 |
| Firefox               | 2019-08-25 15:00:00.000 |   450 |
| Firefox               | 2019-08-25 16:00:00.000 |   606 |
| IE                    | 2019-08-25 00:00:00.000 |    26 |
| IE                    | 2019-08-25 01:00:00.000 |    24 |
| IE                    | 2019-08-25 02:00:00.000 |    19 |
| IE                    | 2019-08-25 03:00:00.000 |    54 |
| IE                    | 2019-08-25 04:00:00.000 |    20 |
| IE                    | 2019-08-25 05:00:00.000 |    23 |
| IE                    | 2019-08-25 08:00:00.000 |    47 |
| IE                    | 2019-08-25 09:00:00.000 |    93 |
| IE                    | 2019-08-25 10:00:00.000 |    36 |
| IE                    | 2019-08-25 11:00:00.000 |    75 |
| IE                    | 2019-08-25 12:00:00.000 |    77 |
| IE                    | 2019-08-25 15:00:00.000 |    30 |
| IE                    | 2019-08-25 16:00:00.000 |    89 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |  2285 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |  2472 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |  3944 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |  2381 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |  1487 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |  1821 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |   857 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |   624 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |   598 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |   764 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |   768 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |   642 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |  1171 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |  2671 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |  4037 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |  2546 |
| Mobile Safari         | 2019-08-25 16:00:00.000 | 10542 |
| Mozilla               | 2019-08-25 00:00:00.000 |    72 |
| Mozilla               | 2019-08-25 01:00:00.000 |    42 |
| Mozilla               | 2019-08-25 02:00:00.000 |   115 |
| Mozilla               | 2019-08-25 03:00:00.000 |     7 |
| Mozilla               | 2019-08-25 04:00:00.000 |    32 |
| Mozilla               | 2019-08-25 06:00:00.000 |    22 |
| Mozilla               | 2019-08-25 07:00:00.000 |    15 |
| Mozilla               | 2019-08-25 08:00:00.000 |    33 |
| Mozilla               | 2019-08-25 09:00:00.000 |    91 |
| Mozilla               | 2019-08-25 10:00:00.000 |    74 |
| Mozilla               | 2019-08-25 12:00:00.000 |    35 |
| Mozilla               | 2019-08-25 13:00:00.000 |   150 |
| Mozilla               | 2019-08-25 14:00:00.000 |    74 |
| Mozilla               | 2019-08-25 16:00:00.000 |    24 |
| Opera                 | 2019-08-25 00:00:00.000 |   139 |
| Opera                 | 2019-08-25 01:00:00.000 |    78 |
| Opera                 | 2019-08-25 02:00:00.000 |    25 |
| Opera                 | 2019-08-25 03:00:00.000 |    63 |
| Opera                 | 2019-08-25 04:00:00.000 |    54 |
| Opera                 | 2019-08-25 05:00:00.000 |   143 |
| Opera                 | 2019-08-25 06:00:00.000 |    72 |
| Opera                 | 2019-08-25 07:00:00.000 |   210 |
| Opera                 | 2019-08-25 08:00:00.000 |    80 |
| Opera                 | 2019-08-25 09:00:00.000 |    72 |
| Opera                 | 2019-08-25 10:00:00.000 |   160 |
| Opera                 | 2019-08-25 11:00:00.000 |   133 |
| Opera                 | 2019-08-25 12:00:00.000 |    57 |
| Opera                 | 2019-08-25 13:00:00.000 |    41 |
| Opera                 | 2019-08-25 14:00:00.000 |   152 |
| Opera                 | 2019-08-25 15:00:00.000 |    42 |
| Opera                 | 2019-08-25 16:00:00.000 |   176 |
| Safari                | 2019-08-25 00:00:00.000 |   960 |
| Safari                | 2019-08-25 01:00:00.000 |  1319 |
| Safari                | 2019-08-25 02:00:00.000 |  1244 |
| Safari                | 2019-08-25 03:00:00.000 |   882 |
| Safari                | 2019-08-25 04:00:00.000 |  1036 |
| Safari                | 2019-08-25 05:00:00.000 |   563 |
| Safari                | 2019-08-25 06:00:00.000 |   317 |
| Safari                | 2019-08-25 07:00:00.000 |   303 |
| Safari                | 2019-08-25 08:00:00.000 |   291 |
| Safari                | 2019-08-25 09:00:00.000 |   218 |
| Safari                | 2019-08-25 10:00:00.000 |   158 |
| Safari                | 2019-08-25 11:00:00.000 |   271 |
| Safari                | 2019-08-25 12:00:00.000 |   588 |
| Safari                | 2019-08-25 13:00:00.000 |   913 |
| Safari                | 2019-08-25 14:00:00.000 |  1309 |
| Safari                | 2019-08-25 15:00:00.000 |   858 |
| Safari                | 2019-08-25 16:00:00.000 |  3658 |
| Silk                  | 2019-08-25 00:00:00.000 |     8 |
| Silk                  | 2019-08-25 01:00:00.000 |    20 |
| Silk                  | 2019-08-25 02:00:00.000 |    63 |
| Silk                  | 2019-08-25 03:00:00.000 |    16 |
| Silk                  | 2019-08-25 04:00:00.000 |   113 |
| Silk                  | 2019-08-25 05:00:00.000 |    60 |
| Silk                  | 2019-08-25 08:00:00.000 |     1 |
| Silk                  | 2019-08-25 09:00:00.000 |     7 |
| Silk                  | 2019-08-25 11:00:00.000 |    60 |
| Silk                  | 2019-08-25 12:00:00.000 |     1 |
| Silk                  | 2019-08-25 13:00:00.000 |     3 |
| Silk                  | 2019-08-25 14:00:00.000 |     8 |
| Silk                  | 2019-08-25 15:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |   138 |
| Yandex.Browser        | 2019-08-25 00:00:00.000 |    22 |
| Yandex.Browser        | 2019-08-25 01:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 05:00:00.000 |    48 |
| Yandex.Browser        | 2019-08-25 06:00:00.000 |   142 |
| Yandex.Browser        | 2019-08-25 07:00:00.000 |   461 |
| Yandex.Browser        | 2019-08-25 08:00:00.000 |   121 |
| Yandex.Browser        | 2019-08-25 09:00:00.000 |   175 |
| Yandex.Browser        | 2019-08-25 10:00:00.000 |   296 |
| Yandex.Browser        | 2019-08-25 11:00:00.000 |   581 |
| Yandex.Browser        | 2019-08-25 12:00:00.000 |   180 |
| Yandex.Browser        | 2019-08-25 13:00:00.000 |   418 |
| Yandex.Browser        | 2019-08-25 14:00:00.000 |   307 |
| Yandex.Browser        | 2019-08-25 15:00:00.000 |   251 |
| Yandex.Browser        | 2019-08-25 16:00:00.000 |   241 |
| Yandex.Browser mobile | 2019-08-25 05:00:00.000 |    24 |
| Yandex.Browser mobile | 2019-08-25 06:00:00.000 |    18 |
| Yandex.Browser mobile | 2019-08-25 07:00:00.000 |    46 |
| Yandex.Browser mobile | 2019-08-25 09:00:00.000 |    23 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |    64 |
| Yandex.Browser mobile | 2019-08-25 11:00:00.000 |    43 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |    61 |
| Yandex.Browser mobile | 2019-08-25 13:00:00.000 |     1 |
| Yandex.Browser mobile | 2019-08-25 14:00:00.000 |     4 |
| Yandex.Browser mobile | 2019-08-25 15:00:00.000 |     7 |
+-----------------------+-------------------------+-------+
(167 rows)

!ok
# Wed Jul 10 19:27:48 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
# Wed Jul 10 19:27:52 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) AS "Category",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 101;
+-------------------+--------+
| Category          | count  |
+-------------------+--------+
| Personal computer | 288919 |
| Smartphone        | 164602 |
| Tablet            |  11479 |
| Game console      |    238 |
| Smart TV          |     81 |
|                   |     27 |
+-------------------+--------+
(6 rows)

!ok
# Wed Jul 10 19:27:52 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) AS "Category",
(COUNT(*)) AS "_cmp_count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Personal computer','Smartphone','Tablet','Game console','Smart TV',''))
GROUP BY 1
ORDER BY "_cmp_count" DESC
LIMIT 101;
+----------+------------+
| Category | _cmp_count |
+----------+------------+
+----------+------------+
(0 rows)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------------+-------+
| Browser               | count |
+-----------------------+-------+
| Mobile Safari         |  9659 |
| Silk                  |  1050 |
| Chrome Mobile         |   631 |
| Puffin                |   124 |
| Yandex.Browser mobile |    15 |
+-----------------------+-------+
(5 rows)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet'))
GROUP BY ();
+-------+----+
| v0    | v1 |
+-------+----+
| 11479 |  0 |
+-------+----+
(1 row)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet'))
GROUP BY 1;
+-------------------------+-------+
| __time                  | count |
+-------------------------+-------+
| 2019-08-25 00:00:00.000 |   280 |
| 2019-08-25 01:00:00.000 |   188 |
| 2019-08-25 02:00:00.000 |   429 |
| 2019-08-25 03:00:00.000 |   332 |
| 2019-08-25 04:00:00.000 |   310 |
| 2019-08-25 05:00:00.000 |   244 |
| 2019-08-25 06:00:00.000 |    84 |
| 2019-08-25 07:00:00.000 |   134 |
| 2019-08-25 08:00:00.000 |    90 |
| 2019-08-25 09:00:00.000 |    82 |
| 2019-08-25 10:00:00.000 |   125 |
| 2019-08-25 11:00:00.000 |   162 |
| 2019-08-25 12:00:00.000 |    63 |
| 2019-08-25 13:00:00.000 |   363 |
| 2019-08-25 14:00:00.000 |   326 |
| 2019-08-25 15:00:00.000 |   272 |
| 2019-08-25 16:00:00.000 |  1147 |
+-------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Silk','Chrome Mobile','Puffin','Yandex.Browser mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Chrome Mobile         | 2019-08-25 00:00:00.000 |     3 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |    29 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |     7 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |    42 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |     5 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |     2 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |     1 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |     1 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |     4 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |    15 |
| Chrome Mobile         | 2019-08-25 12:00:00.000 |     1 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |     7 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |     1 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |    32 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |   269 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |   139 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |   359 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |   257 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |   184 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |   179 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |    82 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |   104 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |    88 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |    75 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |    94 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |    84 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |    60 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |   353 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |   318 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |   263 |
| Mobile Safari         | 2019-08-25 16:00:00.000 |   977 |
| Puffin                | 2019-08-25 03:00:00.000 |    17 |
| Puffin                | 2019-08-25 07:00:00.000 |    29 |
| Puffin                | 2019-08-25 10:00:00.000 |    23 |
| Silk                  | 2019-08-25 00:00:00.000 |     8 |
| Silk                  | 2019-08-25 01:00:00.000 |    20 |
| Silk                  | 2019-08-25 02:00:00.000 |    63 |
| Silk                  | 2019-08-25 03:00:00.000 |    16 |
| Silk                  | 2019-08-25 04:00:00.000 |   113 |
| Silk                  | 2019-08-25 05:00:00.000 |    60 |
| Silk                  | 2019-08-25 08:00:00.000 |     1 |
| Silk                  | 2019-08-25 09:00:00.000 |     7 |
| Silk                  | 2019-08-25 11:00:00.000 |    60 |
| Silk                  | 2019-08-25 12:00:00.000 |     1 |
| Silk                  | 2019-08-25 13:00:00.000 |     3 |
| Silk                  | 2019-08-25 14:00:00.000 |     8 |
| Silk                  | 2019-08-25 15:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |   138 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |     4 |
| Yandex.Browser mobile | 2019-08-25 11:00:00.000 |     3 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |     1 |
| Yandex.Browser mobile | 2019-08-25 15:00:00.000 |     7 |
+-----------------------+-------------------------+-------+
(53 rows)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Silk','Chrome Mobile','Puffin','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------------+--------+
| Browser               | count  |
+-----------------------+--------+
| Mobile Safari         | 113617 |
| Chrome Mobile         |  60173 |
| Silk                  |   1050 |
| Yandex.Browser mobile |    583 |
| Mobile Firefox        |    253 |
| Puffin                |    240 |
| Opera Mobile          |     78 |
| Android browser       |     52 |
| IE Mobile             |     35 |
+-----------------------+--------+
(9 rows)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone'))
GROUP BY ();
+--------+----+
| v0     | v1 |
+--------+----+
| 176081 |  0 |
+--------+----+
(1 row)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone'))
GROUP BY 1;
+-------------------------+-------+
| __time                  | count |
+-------------------------+-------+
| 2019-08-25 00:00:00.000 |  3291 |
| 2019-08-25 01:00:00.000 |  3840 |
| 2019-08-25 02:00:00.000 |  5363 |
| 2019-08-25 03:00:00.000 |  4002 |
| 2019-08-25 04:00:00.000 |  2601 |
| 2019-08-25 05:00:00.000 |  2905 |
| 2019-08-25 06:00:00.000 |  1984 |
| 2019-08-25 07:00:00.000 |  1886 |
| 2019-08-25 08:00:00.000 |  1720 |
| 2019-08-25 09:00:00.000 |  1809 |
| 2019-08-25 10:00:00.000 |  2005 |
| 2019-08-25 11:00:00.000 |  2196 |
| 2019-08-25 12:00:00.000 |  3028 |
| 2019-08-25 13:00:00.000 |  4913 |
| 2019-08-25 14:00:00.000 |  7053 |
| 2019-08-25 15:00:00.000 |  4004 |
| 2019-08-25 16:00:00.000 | 14306 |
+-------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Chrome Mobile','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Opera Mobile','Android browser','IE Mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Android browser       | 2019-08-25 04:00:00.000 |     1 |
| Android browser       | 2019-08-25 10:00:00.000 |    11 |
| Android browser       | 2019-08-25 13:00:00.000 |     3 |
| Android browser       | 2019-08-25 14:00:00.000 |     1 |
| Android browser       | 2019-08-25 16:00:00.000 |     1 |
| Chrome Mobile         | 2019-08-25 00:00:00.000 |   998 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |  1340 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |  1355 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |  1588 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |   999 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |  1000 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |  1094 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |  1163 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |  1114 |
| Chrome Mobile         | 2019-08-25 09:00:00.000 |  1015 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |  1138 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |  1396 |
| Chrome Mobile         | 2019-08-25 12:00:00.000 |  1763 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |  2231 |
| Chrome Mobile         | 2019-08-25 14:00:00.000 |  2936 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |  1436 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |  3625 |
| IE Mobile             | 2019-08-25 01:00:00.000 |     7 |
| IE Mobile             | 2019-08-25 02:00:00.000 |     1 |
| IE Mobile             | 2019-08-25 06:00:00.000 |    15 |
| IE Mobile             | 2019-08-25 08:00:00.000 |     7 |
| Mobile Firefox        | 2019-08-25 01:00:00.000 |     1 |
| Mobile Firefox        | 2019-08-25 04:00:00.000 |     1 |
| Mobile Firefox        | 2019-08-25 07:00:00.000 |    24 |
| Mobile Firefox        | 2019-08-25 11:00:00.000 |    54 |
| Mobile Firefox        | 2019-08-25 12:00:00.000 |    19 |
| Mobile Firefox        | 2019-08-25 13:00:00.000 |     4 |
| Mobile Firefox        | 2019-08-25 14:00:00.000 |     2 |
| Mobile Firefox        | 2019-08-25 15:00:00.000 |    14 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |  2285 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |  2472 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |  3944 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |  2381 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |  1487 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |  1821 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |   857 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |   624 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |   598 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |   764 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |   768 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |   642 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |  1171 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |  2671 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |  4037 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |  2546 |
| Mobile Safari         | 2019-08-25 16:00:00.000 | 10542 |
| Opera Mobile          | 2019-08-25 10:00:00.000 |     1 |
| Puffin                | 2019-08-25 03:00:00.000 |    17 |
| Puffin                | 2019-08-25 07:00:00.000 |    29 |
| Puffin                | 2019-08-25 10:00:00.000 |    23 |
| Puffin                | 2019-08-25 11:00:00.000 |     1 |
| Puffin                | 2019-08-25 12:00:00.000 |    13 |
| Puffin                | 2019-08-25 14:00:00.000 |    65 |
| Silk                  | 2019-08-25 00:00:00.000 |     8 |
| Silk                  | 2019-08-25 01:00:00.000 |    20 |
| Silk                  | 2019-08-25 02:00:00.000 |    63 |
| Silk                  | 2019-08-25 03:00:00.000 |    16 |
| Silk                  | 2019-08-25 04:00:00.000 |   113 |
| Silk                  | 2019-08-25 05:00:00.000 |    60 |
| Silk                  | 2019-08-25 08:00:00.000 |     1 |
| Silk                  | 2019-08-25 09:00:00.000 |     7 |
| Silk                  | 2019-08-25 11:00:00.000 |    60 |
| Silk                  | 2019-08-25 12:00:00.000 |     1 |
| Silk                  | 2019-08-25 13:00:00.000 |     3 |
| Silk                  | 2019-08-25 14:00:00.000 |     8 |
| Silk                  | 2019-08-25 15:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |   138 |
| Yandex.Browser mobile | 2019-08-25 05:00:00.000 |    24 |
| Yandex.Browser mobile | 2019-08-25 06:00:00.000 |    18 |
| Yandex.Browser mobile | 2019-08-25 07:00:00.000 |    46 |
| Yandex.Browser mobile | 2019-08-25 09:00:00.000 |    23 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |    64 |
| Yandex.Browser mobile | 2019-08-25 11:00:00.000 |    43 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |    61 |
| Yandex.Browser mobile | 2019-08-25 13:00:00.000 |     1 |
| Yandex.Browser mobile | 2019-08-25 14:00:00.000 |     4 |
| Yandex.Browser mobile | 2019-08-25 15:00:00.000 |     7 |
+-----------------------+-------------------------+-------+
(82 rows)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Chrome Mobile','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Opera Mobile','Android browser','IE Mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
# Wed Jul 10 19:27:58 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------------+--------+
| Browser               | count  |
+-----------------------+--------+
| Chrome                | 232380 |
| Mobile Safari         | 113617 |
| Chrome Mobile         |  60173 |
| Safari                |  38323 |
| Firefox               |   8307 |
| Yandex.Browser        |   4258 |
| Opera                 |   2819 |
| IE                    |   1238 |
| Mozilla               |   1224 |
| Silk                  |   1050 |
| Yandex.Browser mobile |    583 |
| Mobile Firefox        |    253 |
| Puffin                |    240 |
| Chromium              |    149 |
| Waterfox              |    129 |
| Opera Mobile          |     78 |
| Android browser       |     52 |
| Sogou Explorer        |     51 |
| IE Mobile             |     35 |
| Maxthon               |     34 |
| Apple Mail            |      7 |
+-----------------------+--------+
(21 rows)

!ok
# Wed Jul 10 19:27:58 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer'))
GROUP BY ();
+--------+----+
| v0     | v1 |
+--------+----+
| 465000 |  0 |
+--------+----+
(1 row)

!ok
# Wed Jul 10 19:27:58 IST 2024
SELECT
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer'))
GROUP BY 1;
+-------------------------+-------+
| __time                  | count |
+-------------------------+-------+
| 2019-08-25 00:00:00.000 | 13534 |
| 2019-08-25 01:00:00.000 | 13425 |
| 2019-08-25 02:00:00.000 | 15005 |
| 2019-08-25 03:00:00.000 | 12829 |
| 2019-08-25 04:00:00.000 |  9067 |
| 2019-08-25 05:00:00.000 |  8039 |
| 2019-08-25 06:00:00.000 |  6147 |
| 2019-08-25 07:00:00.000 |  5557 |
| 2019-08-25 08:00:00.000 |  5742 |
| 2019-08-25 09:00:00.000 |  6081 |
| 2019-08-25 10:00:00.000 |  6452 |
| 2019-08-25 11:00:00.000 |  6716 |
| 2019-08-25 12:00:00.000 |  9166 |
| 2019-08-25 13:00:00.000 | 13302 |
| 2019-08-25 14:00:00.000 | 17910 |
| 2019-08-25 15:00:00.000 | 12695 |
| 2019-08-25 16:00:00.000 | 35465 |
+-------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:27:58 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Chrome                | 2019-08-25 00:00:00.000 |  8617 |
| Chrome                | 2019-08-25 01:00:00.000 |  7806 |
| Chrome                | 2019-08-25 02:00:00.000 |  7851 |
| Chrome                | 2019-08-25 03:00:00.000 |  7650 |
| Chrome                | 2019-08-25 04:00:00.000 |  5253 |
| Chrome                | 2019-08-25 05:00:00.000 |  4044 |
| Chrome                | 2019-08-25 06:00:00.000 |  3497 |
| Chrome                | 2019-08-25 07:00:00.000 |  2591 |
| Chrome                | 2019-08-25 08:00:00.000 |  3260 |
| Chrome                | 2019-08-25 09:00:00.000 |  3438 |
| Chrome                | 2019-08-25 10:00:00.000 |  3506 |
| Chrome                | 2019-08-25 11:00:00.000 |  3137 |
| Chrome                | 2019-08-25 12:00:00.000 |  4782 |
| Chrome                | 2019-08-25 13:00:00.000 |  6412 |
| Chrome                | 2019-08-25 14:00:00.000 |  8610 |
| Chrome                | 2019-08-25 15:00:00.000 |  7060 |
| Chrome                | 2019-08-25 16:00:00.000 | 16364 |
| Chrome Mobile         | 2019-08-25 00:00:00.000 |   998 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |  1340 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |  1355 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |  1588 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |   999 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |  1000 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |  1094 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |  1163 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |  1114 |
| Chrome Mobile         | 2019-08-25 09:00:00.000 |  1015 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |  1138 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |  1396 |
| Chrome Mobile         | 2019-08-25 12:00:00.000 |  1763 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |  2231 |
| Chrome Mobile         | 2019-08-25 14:00:00.000 |  2936 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |  1436 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |  3625 |
| Firefox               | 2019-08-25 00:00:00.000 |   406 |
| Firefox               | 2019-08-25 01:00:00.000 |   268 |
| Firefox               | 2019-08-25 02:00:00.000 |   388 |
| Firefox               | 2019-08-25 03:00:00.000 |   170 |
| Firefox               | 2019-08-25 04:00:00.000 |    69 |
| Firefox               | 2019-08-25 05:00:00.000 |   313 |
| Firefox               | 2019-08-25 06:00:00.000 |    95 |
| Firefox               | 2019-08-25 07:00:00.000 |    90 |
| Firefox               | 2019-08-25 08:00:00.000 |   185 |
| Firefox               | 2019-08-25 09:00:00.000 |   146 |
| Firefox               | 2019-08-25 10:00:00.000 |   217 |
| Firefox               | 2019-08-25 11:00:00.000 |   268 |
| Firefox               | 2019-08-25 12:00:00.000 |   401 |
| Firefox               | 2019-08-25 13:00:00.000 |   438 |
| Firefox               | 2019-08-25 14:00:00.000 |   405 |
| Firefox               | 2019-08-25 15:00:00.000 |   450 |
| Firefox               | 2019-08-25 16:00:00.000 |   606 |
| IE                    | 2019-08-25 00:00:00.000 |    26 |
| IE                    | 2019-08-25 01:00:00.000 |    24 |
| IE                    | 2019-08-25 02:00:00.000 |    19 |
| IE                    | 2019-08-25 03:00:00.000 |    54 |
| IE                    | 2019-08-25 04:00:00.000 |    20 |
| IE                    | 2019-08-25 05:00:00.000 |    23 |
| IE                    | 2019-08-25 08:00:00.000 |    47 |
| IE                    | 2019-08-25 09:00:00.000 |    93 |
| IE                    | 2019-08-25 10:00:00.000 |    36 |
| IE                    | 2019-08-25 11:00:00.000 |    75 |
| IE                    | 2019-08-25 12:00:00.000 |    77 |
| IE                    | 2019-08-25 15:00:00.000 |    30 |
| IE                    | 2019-08-25 16:00:00.000 |    89 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |  2285 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |  2472 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |  3944 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |  2381 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |  1487 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |  1821 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |   857 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |   624 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |   598 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |   764 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |   768 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |   642 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |  1171 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |  2671 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |  4037 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |  2546 |
| Mobile Safari         | 2019-08-25 16:00:00.000 | 10542 |
| Mozilla               | 2019-08-25 00:00:00.000 |    72 |
| Mozilla               | 2019-08-25 01:00:00.000 |    42 |
| Mozilla               | 2019-08-25 02:00:00.000 |   115 |
| Mozilla               | 2019-08-25 03:00:00.000 |     7 |
| Mozilla               | 2019-08-25 04:00:00.000 |    32 |
| Mozilla               | 2019-08-25 06:00:00.000 |    22 |
| Mozilla               | 2019-08-25 07:00:00.000 |    15 |
| Mozilla               | 2019-08-25 08:00:00.000 |    33 |
| Mozilla               | 2019-08-25 09:00:00.000 |    91 |
| Mozilla               | 2019-08-25 10:00:00.000 |    74 |
| Mozilla               | 2019-08-25 12:00:00.000 |    35 |
| Mozilla               | 2019-08-25 13:00:00.000 |   150 |
| Mozilla               | 2019-08-25 14:00:00.000 |    74 |
| Mozilla               | 2019-08-25 16:00:00.000 |    24 |
| Opera                 | 2019-08-25 00:00:00.000 |   139 |
| Opera                 | 2019-08-25 01:00:00.000 |    78 |
| Opera                 | 2019-08-25 02:00:00.000 |    25 |
| Opera                 | 2019-08-25 03:00:00.000 |    63 |
| Opera                 | 2019-08-25 04:00:00.000 |    54 |
| Opera                 | 2019-08-25 05:00:00.000 |   143 |
| Opera                 | 2019-08-25 06:00:00.000 |    72 |
| Opera                 | 2019-08-25 07:00:00.000 |   210 |
| Opera                 | 2019-08-25 08:00:00.000 |    80 |
| Opera                 | 2019-08-25 09:00:00.000 |    72 |
| Opera                 | 2019-08-25 10:00:00.000 |   160 |
| Opera                 | 2019-08-25 11:00:00.000 |   133 |
| Opera                 | 2019-08-25 12:00:00.000 |    57 |
| Opera                 | 2019-08-25 13:00:00.000 |    41 |
| Opera                 | 2019-08-25 14:00:00.000 |   152 |
| Opera                 | 2019-08-25 15:00:00.000 |    42 |
| Opera                 | 2019-08-25 16:00:00.000 |   176 |
| Safari                | 2019-08-25 00:00:00.000 |   960 |
| Safari                | 2019-08-25 01:00:00.000 |  1319 |
| Safari                | 2019-08-25 02:00:00.000 |  1244 |
| Safari                | 2019-08-25 03:00:00.000 |   882 |
| Safari                | 2019-08-25 04:00:00.000 |  1036 |
| Safari                | 2019-08-25 05:00:00.000 |   563 |
| Safari                | 2019-08-25 06:00:00.000 |   317 |
| Safari                | 2019-08-25 07:00:00.000 |   303 |
| Safari                | 2019-08-25 08:00:00.000 |   291 |
| Safari                | 2019-08-25 09:00:00.000 |   218 |
| Safari                | 2019-08-25 10:00:00.000 |   158 |
| Safari                | 2019-08-25 11:00:00.000 |   271 |
| Safari                | 2019-08-25 12:00:00.000 |   588 |
| Safari                | 2019-08-25 13:00:00.000 |   913 |
| Safari                | 2019-08-25 14:00:00.000 |  1309 |
| Safari                | 2019-08-25 15:00:00.000 |   858 |
| Safari                | 2019-08-25 16:00:00.000 |  3658 |
| Silk                  | 2019-08-25 00:00:00.000 |     8 |
| Silk                  | 2019-08-25 01:00:00.000 |    20 |
| Silk                  | 2019-08-25 02:00:00.000 |    63 |
| Silk                  | 2019-08-25 03:00:00.000 |    16 |
| Silk                  | 2019-08-25 04:00:00.000 |   113 |
| Silk                  | 2019-08-25 05:00:00.000 |    60 |
| Silk                  | 2019-08-25 08:00:00.000 |     1 |
| Silk                  | 2019-08-25 09:00:00.000 |     7 |
| Silk                  | 2019-08-25 11:00:00.000 |    60 |
| Silk                  | 2019-08-25 12:00:00.000 |     1 |
| Silk                  | 2019-08-25 13:00:00.000 |     3 |
| Silk                  | 2019-08-25 14:00:00.000 |     8 |
| Silk                  | 2019-08-25 15:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |   138 |
| Yandex.Browser        | 2019-08-25 00:00:00.000 |    22 |
| Yandex.Browser        | 2019-08-25 01:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 05:00:00.000 |    48 |
| Yandex.Browser        | 2019-08-25 06:00:00.000 |   142 |
| Yandex.Browser        | 2019-08-25 07:00:00.000 |   461 |
| Yandex.Browser        | 2019-08-25 08:00:00.000 |   121 |
| Yandex.Browser        | 2019-08-25 09:00:00.000 |   175 |
| Yandex.Browser        | 2019-08-25 10:00:00.000 |   296 |
| Yandex.Browser        | 2019-08-25 11:00:00.000 |   581 |
| Yandex.Browser        | 2019-08-25 12:00:00.000 |   180 |
| Yandex.Browser        | 2019-08-25 13:00:00.000 |   418 |
| Yandex.Browser        | 2019-08-25 14:00:00.000 |   307 |
| Yandex.Browser        | 2019-08-25 15:00:00.000 |   251 |
| Yandex.Browser        | 2019-08-25 16:00:00.000 |   241 |
| Yandex.Browser mobile | 2019-08-25 05:00:00.000 |    24 |
| Yandex.Browser mobile | 2019-08-25 06:00:00.000 |    18 |
| Yandex.Browser mobile | 2019-08-25 07:00:00.000 |    46 |
| Yandex.Browser mobile | 2019-08-25 09:00:00.000 |    23 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |    64 |
| Yandex.Browser mobile | 2019-08-25 11:00:00.000 |    43 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |    61 |
| Yandex.Browser mobile | 2019-08-25 13:00:00.000 |     1 |
| Yandex.Browser mobile | 2019-08-25 14:00:00.000 |     4 |
| Yandex.Browser mobile | 2019-08-25 15:00:00.000 |     7 |
+-----------------------+-------------------------+-------+
(167 rows)

!ok
# Wed Jul 10 19:27:59 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------------+--------+
| Browser               | count  |
+-----------------------+--------+
| Chrome                | 232522 |
| Mobile Safari         | 113617 |
| Chrome Mobile         |  60173 |
| Safari                |  38323 |
| Firefox               |   8307 |
| Yandex.Browser        |   4258 |
| Opera                 |   2819 |
| IE                    |   1238 |
| Mozilla               |   1224 |
| Silk                  |   1050 |
| Yandex.Browser mobile |    583 |
| Mobile Firefox        |    253 |
| Puffin                |    240 |
| Chromium              |    149 |
| Waterfox              |    129 |
| Opera Mobile          |     78 |
| PS4 Web browser       |     77 |
| Android browser       |     52 |
| Sogou Explorer        |     51 |
| IE Mobile             |     35 |
| Maxthon               |     34 |
| PS Vita browser       |     19 |
| Apple Mail            |      7 |
+-----------------------+--------+
(23 rows)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console'))
GROUP BY ();
+--------+----+
| v0     | v1 |
+--------+----+
| 465238 |  0 |
+--------+----+
(1 row)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console'))
GROUP BY 1;
+-------------------------+-------+
| __time                  | count |
+-------------------------+-------+
| 2019-08-25 00:00:00.000 | 13559 |
| 2019-08-25 01:00:00.000 | 13434 |
| 2019-08-25 02:00:00.000 | 15005 |
| 2019-08-25 03:00:00.000 | 12857 |
| 2019-08-25 04:00:00.000 |  9083 |
| 2019-08-25 05:00:00.000 |  8040 |
| 2019-08-25 06:00:00.000 |  6147 |
| 2019-08-25 07:00:00.000 |  5557 |
| 2019-08-25 08:00:00.000 |  5742 |
| 2019-08-25 09:00:00.000 |  6104 |
| 2019-08-25 10:00:00.000 |  6452 |
| 2019-08-25 11:00:00.000 |  6716 |
| 2019-08-25 12:00:00.000 |  9166 |
| 2019-08-25 13:00:00.000 | 13302 |
| 2019-08-25 14:00:00.000 | 17930 |
| 2019-08-25 15:00:00.000 | 12696 |
| 2019-08-25 16:00:00.000 | 35474 |
+-------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Chrome                | 2019-08-25 00:00:00.000 |  8635 |
| Chrome                | 2019-08-25 01:00:00.000 |  7807 |
| Chrome                | 2019-08-25 02:00:00.000 |  7851 |
| Chrome                | 2019-08-25 03:00:00.000 |  7650 |
| Chrome                | 2019-08-25 04:00:00.000 |  5269 |
| Chrome                | 2019-08-25 05:00:00.000 |  4044 |
| Chrome                | 2019-08-25 06:00:00.000 |  3497 |
| Chrome                | 2019-08-25 07:00:00.000 |  2591 |
| Chrome                | 2019-08-25 08:00:00.000 |  3260 |
| Chrome                | 2019-08-25 09:00:00.000 |  3461 |
| Chrome                | 2019-08-25 10:00:00.000 |  3506 |
| Chrome                | 2019-08-25 11:00:00.000 |  3137 |
| Chrome                | 2019-08-25 12:00:00.000 |  4782 |
| Chrome                | 2019-08-25 13:00:00.000 |  6412 |
| Chrome                | 2019-08-25 14:00:00.000 |  8610 |
| Chrome                | 2019-08-25 15:00:00.000 |  7060 |
| Chrome                | 2019-08-25 16:00:00.000 | 16371 |
| Chrome Mobile         | 2019-08-25 00:00:00.000 |   998 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |  1340 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |  1355 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |  1588 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |   999 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |  1000 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |  1094 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |  1163 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |  1114 |
| Chrome Mobile         | 2019-08-25 09:00:00.000 |  1015 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |  1138 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |  1396 |
| Chrome Mobile         | 2019-08-25 12:00:00.000 |  1763 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |  2231 |
| Chrome Mobile         | 2019-08-25 14:00:00.000 |  2936 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |  1436 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |  3625 |
| Firefox               | 2019-08-25 00:00:00.000 |   406 |
| Firefox               | 2019-08-25 01:00:00.000 |   268 |
| Firefox               | 2019-08-25 02:00:00.000 |   388 |
| Firefox               | 2019-08-25 03:00:00.000 |   170 |
| Firefox               | 2019-08-25 04:00:00.000 |    69 |
| Firefox               | 2019-08-25 05:00:00.000 |   313 |
| Firefox               | 2019-08-25 06:00:00.000 |    95 |
| Firefox               | 2019-08-25 07:00:00.000 |    90 |
| Firefox               | 2019-08-25 08:00:00.000 |   185 |
| Firefox               | 2019-08-25 09:00:00.000 |   146 |
| Firefox               | 2019-08-25 10:00:00.000 |   217 |
| Firefox               | 2019-08-25 11:00:00.000 |   268 |
| Firefox               | 2019-08-25 12:00:00.000 |   401 |
| Firefox               | 2019-08-25 13:00:00.000 |   438 |
| Firefox               | 2019-08-25 14:00:00.000 |   405 |
| Firefox               | 2019-08-25 15:00:00.000 |   450 |
| Firefox               | 2019-08-25 16:00:00.000 |   606 |
| IE                    | 2019-08-25 00:00:00.000 |    26 |
| IE                    | 2019-08-25 01:00:00.000 |    24 |
| IE                    | 2019-08-25 02:00:00.000 |    19 |
| IE                    | 2019-08-25 03:00:00.000 |    54 |
| IE                    | 2019-08-25 04:00:00.000 |    20 |
| IE                    | 2019-08-25 05:00:00.000 |    23 |
| IE                    | 2019-08-25 08:00:00.000 |    47 |
| IE                    | 2019-08-25 09:00:00.000 |    93 |
| IE                    | 2019-08-25 10:00:00.000 |    36 |
| IE                    | 2019-08-25 11:00:00.000 |    75 |
| IE                    | 2019-08-25 12:00:00.000 |    77 |
| IE                    | 2019-08-25 15:00:00.000 |    30 |
| IE                    | 2019-08-25 16:00:00.000 |    89 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |  2285 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |  2472 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |  3944 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |  2381 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |  1487 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |  1821 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |   857 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |   624 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |   598 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |   764 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |   768 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |   642 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |  1171 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |  2671 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |  4037 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |  2546 |
| Mobile Safari         | 2019-08-25 16:00:00.000 | 10542 |
| Mozilla               | 2019-08-25 00:00:00.000 |    72 |
| Mozilla               | 2019-08-25 01:00:00.000 |    42 |
| Mozilla               | 2019-08-25 02:00:00.000 |   115 |
| Mozilla               | 2019-08-25 03:00:00.000 |     7 |
| Mozilla               | 2019-08-25 04:00:00.000 |    32 |
| Mozilla               | 2019-08-25 06:00:00.000 |    22 |
| Mozilla               | 2019-08-25 07:00:00.000 |    15 |
| Mozilla               | 2019-08-25 08:00:00.000 |    33 |
| Mozilla               | 2019-08-25 09:00:00.000 |    91 |
| Mozilla               | 2019-08-25 10:00:00.000 |    74 |
| Mozilla               | 2019-08-25 12:00:00.000 |    35 |
| Mozilla               | 2019-08-25 13:00:00.000 |   150 |
| Mozilla               | 2019-08-25 14:00:00.000 |    74 |
| Mozilla               | 2019-08-25 16:00:00.000 |    24 |
| Opera                 | 2019-08-25 00:00:00.000 |   139 |
| Opera                 | 2019-08-25 01:00:00.000 |    78 |
| Opera                 | 2019-08-25 02:00:00.000 |    25 |
| Opera                 | 2019-08-25 03:00:00.000 |    63 |
| Opera                 | 2019-08-25 04:00:00.000 |    54 |
| Opera                 | 2019-08-25 05:00:00.000 |   143 |
| Opera                 | 2019-08-25 06:00:00.000 |    72 |
| Opera                 | 2019-08-25 07:00:00.000 |   210 |
| Opera                 | 2019-08-25 08:00:00.000 |    80 |
| Opera                 | 2019-08-25 09:00:00.000 |    72 |
| Opera                 | 2019-08-25 10:00:00.000 |   160 |
| Opera                 | 2019-08-25 11:00:00.000 |   133 |
| Opera                 | 2019-08-25 12:00:00.000 |    57 |
| Opera                 | 2019-08-25 13:00:00.000 |    41 |
| Opera                 | 2019-08-25 14:00:00.000 |   152 |
| Opera                 | 2019-08-25 15:00:00.000 |    42 |
| Opera                 | 2019-08-25 16:00:00.000 |   176 |
| Safari                | 2019-08-25 00:00:00.000 |   960 |
| Safari                | 2019-08-25 01:00:00.000 |  1319 |
| Safari                | 2019-08-25 02:00:00.000 |  1244 |
| Safari                | 2019-08-25 03:00:00.000 |   882 |
| Safari                | 2019-08-25 04:00:00.000 |  1036 |
| Safari                | 2019-08-25 05:00:00.000 |   563 |
| Safari                | 2019-08-25 06:00:00.000 |   317 |
| Safari                | 2019-08-25 07:00:00.000 |   303 |
| Safari                | 2019-08-25 08:00:00.000 |   291 |
| Safari                | 2019-08-25 09:00:00.000 |   218 |
| Safari                | 2019-08-25 10:00:00.000 |   158 |
| Safari                | 2019-08-25 11:00:00.000 |   271 |
| Safari                | 2019-08-25 12:00:00.000 |   588 |
| Safari                | 2019-08-25 13:00:00.000 |   913 |
| Safari                | 2019-08-25 14:00:00.000 |  1309 |
| Safari                | 2019-08-25 15:00:00.000 |   858 |
| Safari                | 2019-08-25 16:00:00.000 |  3658 |
| Silk                  | 2019-08-25 00:00:00.000 |     8 |
| Silk                  | 2019-08-25 01:00:00.000 |    20 |
| Silk                  | 2019-08-25 02:00:00.000 |    63 |
| Silk                  | 2019-08-25 03:00:00.000 |    16 |
| Silk                  | 2019-08-25 04:00:00.000 |   113 |
| Silk                  | 2019-08-25 05:00:00.000 |    60 |
| Silk                  | 2019-08-25 08:00:00.000 |     1 |
| Silk                  | 2019-08-25 09:00:00.000 |     7 |
| Silk                  | 2019-08-25 11:00:00.000 |    60 |
| Silk                  | 2019-08-25 12:00:00.000 |     1 |
| Silk                  | 2019-08-25 13:00:00.000 |     3 |
| Silk                  | 2019-08-25 14:00:00.000 |     8 |
| Silk                  | 2019-08-25 15:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |   138 |
| Yandex.Browser        | 2019-08-25 00:00:00.000 |    22 |
| Yandex.Browser        | 2019-08-25 01:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 05:00:00.000 |    48 |
| Yandex.Browser        | 2019-08-25 06:00:00.000 |   142 |
| Yandex.Browser        | 2019-08-25 07:00:00.000 |   461 |
| Yandex.Browser        | 2019-08-25 08:00:00.000 |   121 |
| Yandex.Browser        | 2019-08-25 09:00:00.000 |   175 |
| Yandex.Browser        | 2019-08-25 10:00:00.000 |   296 |
| Yandex.Browser        | 2019-08-25 11:00:00.000 |   581 |
| Yandex.Browser        | 2019-08-25 12:00:00.000 |   180 |
| Yandex.Browser        | 2019-08-25 13:00:00.000 |   418 |
| Yandex.Browser        | 2019-08-25 14:00:00.000 |   307 |
| Yandex.Browser        | 2019-08-25 15:00:00.000 |   251 |
| Yandex.Browser        | 2019-08-25 16:00:00.000 |   241 |
| Yandex.Browser mobile | 2019-08-25 05:00:00.000 |    24 |
| Yandex.Browser mobile | 2019-08-25 06:00:00.000 |    18 |
| Yandex.Browser mobile | 2019-08-25 07:00:00.000 |    46 |
| Yandex.Browser mobile | 2019-08-25 09:00:00.000 |    23 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |    64 |
| Yandex.Browser mobile | 2019-08-25 11:00:00.000 |    43 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |    61 |
| Yandex.Browser mobile | 2019-08-25 13:00:00.000 |     1 |
| Yandex.Browser mobile | 2019-08-25 14:00:00.000 |     4 |
| Yandex.Browser mobile | 2019-08-25 15:00:00.000 |     7 |
+-----------------------+-------------------------+-------+
(167 rows)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
