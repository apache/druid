#started Wed Jul 10 19:26:55 IST 2024
!use druidtest:///?componentSupplier=KttmNestedComponentSupplier
!set outputformat mysql
# Wed Jul 10 19:27:27 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:58.044 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 19:27:27 IST 2024
SELECT
MAX(CAST(t."__time" AS TIMESTAMP)) AS "__VALUE__"
FROM "kttm_nested" AS t
GROUP BY ();
+-------------------------+
| __VALUE__               |
+-------------------------+
| 2019-08-25 23:59:58.044 |
+-------------------------+
(1 row)

!ok
# Wed Jul 10 19:27:46 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Chrome Mobile         | 2019-08-25 12:00:00.000 |    16 |
| Firefox               | 2019-08-25 08:00:00.000 |     2 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |     9 |
| Opera                 | 2019-08-25 00:00:00.000 |     1 |
| Opera                 | 2019-08-25 12:00:00.000 |     1 |
| Safari                | 2019-08-25 04:00:00.000 |    11 |
| Safari                | 2019-08-25 12:00:00.000 |     6 |
| Yandex.Browser        | 2019-08-25 08:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 10:00:00.000 |     4 |
| Yandex.Browser        | 2019-08-25 12:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 16:00:00.000 |     2 |
| Chrome                | 2019-08-25 00:00:00.000 |    91 |
| Chrome                | 2019-08-25 01:00:00.000 |    64 |
| Chrome                | 2019-08-25 02:00:00.000 |    89 |
| Chrome                | 2019-08-25 03:00:00.000 |    60 |
| Chrome                | 2019-08-25 04:00:00.000 |    41 |
| Chrome                | 2019-08-25 05:00:00.000 |    45 |
| Chrome                | 2019-08-25 06:00:00.000 |    39 |
| Chrome                | 2019-08-25 07:00:00.000 |    32 |
| Chrome                | 2019-08-25 08:00:00.000 |    28 |
| Chrome                | 2019-08-25 09:00:00.000 |    30 |
| Chrome                | 2019-08-25 10:00:00.000 |    36 |
| Chrome                | 2019-08-25 11:00:00.000 |    33 |
| Chrome                | 2019-08-25 12:00:00.000 |    51 |
| Chrome                | 2019-08-25 13:00:00.000 |    71 |
| Chrome                | 2019-08-25 14:00:00.000 |    85 |
| Chrome                | 2019-08-25 15:00:00.000 |    80 |
| Chrome                | 2019-08-25 16:00:00.000 |   177 |
| Chrome Mobile         | 2019-08-25 00:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |     6 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 09:00:00.000 |    10 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |     5 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |    19 |
| Chrome Mobile         | 2019-08-25 14:00:00.000 |    27 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |    20 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |    35 |
| Firefox               | 2019-08-25 00:00:00.000 |     5 |
| Firefox               | 2019-08-25 01:00:00.000 |     2 |
| Firefox               | 2019-08-25 02:00:00.000 |     5 |
| Firefox               | 2019-08-25 03:00:00.000 |     4 |
| Firefox               | 2019-08-25 05:00:00.000 |     2 |
| Firefox               | 2019-08-25 09:00:00.000 |     1 |
| Firefox               | 2019-08-25 10:00:00.000 |     3 |
| Firefox               | 2019-08-25 11:00:00.000 |     3 |
| Firefox               | 2019-08-25 12:00:00.000 |     3 |
| Firefox               | 2019-08-25 13:00:00.000 |     2 |
| Firefox               | 2019-08-25 14:00:00.000 |     6 |
| Firefox               | 2019-08-25 15:00:00.000 |     1 |
| Firefox               | 2019-08-25 16:00:00.000 |     4 |
| IE                    | 2019-08-25 03:00:00.000 |     1 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |    22 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |    17 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |    33 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |    18 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |    13 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |    24 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |     6 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |     7 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |     6 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |    10 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |     3 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |     9 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |    30 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |    43 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |    15 |
| Mobile Safari         | 2019-08-25 16:00:00.000 |    94 |
| Mozilla               | 2019-08-25 02:00:00.000 |     1 |
| Mozilla               | 2019-08-25 03:00:00.000 |     1 |
| Mozilla               | 2019-08-25 06:00:00.000 |     1 |
| Mozilla               | 2019-08-25 09:00:00.000 |     2 |
| Mozilla               | 2019-08-25 13:00:00.000 |     2 |
| Opera                 | 2019-08-25 01:00:00.000 |     4 |
| Opera                 | 2019-08-25 03:00:00.000 |     2 |
| Opera                 | 2019-08-25 06:00:00.000 |     2 |
| Opera                 | 2019-08-25 07:00:00.000 |     2 |
| Opera                 | 2019-08-25 09:00:00.000 |     1 |
| Opera                 | 2019-08-25 13:00:00.000 |     1 |
| Opera                 | 2019-08-25 16:00:00.000 |     3 |
| Safari                | 2019-08-25 00:00:00.000 |    14 |
| Safari                | 2019-08-25 01:00:00.000 |     9 |
| Safari                | 2019-08-25 02:00:00.000 |    10 |
| Safari                | 2019-08-25 03:00:00.000 |    11 |
| Safari                | 2019-08-25 05:00:00.000 |     5 |
| Safari                | 2019-08-25 06:00:00.000 |     1 |
| Safari                | 2019-08-25 07:00:00.000 |     6 |
| Safari                | 2019-08-25 08:00:00.000 |     2 |
| Safari                | 2019-08-25 09:00:00.000 |     4 |
| Safari                | 2019-08-25 11:00:00.000 |     4 |
| Safari                | 2019-08-25 13:00:00.000 |     9 |
| Safari                | 2019-08-25 14:00:00.000 |    14 |
| Safari                | 2019-08-25 15:00:00.000 |     8 |
| Safari                | 2019-08-25 16:00:00.000 |    40 |
| Silk                  | 2019-08-25 11:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 00:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 06:00:00.000 |     3 |
| Yandex.Browser        | 2019-08-25 07:00:00.000 |     2 |
| Yandex.Browser        | 2019-08-25 09:00:00.000 |     3 |
| Yandex.Browser        | 2019-08-25 11:00:00.000 |     6 |
| Yandex.Browser        | 2019-08-25 13:00:00.000 |     5 |
| Yandex.Browser        | 2019-08-25 14:00:00.000 |     5 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |     2 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |     2 |
+-----------------------+-------------------------+-------+
(111 rows)

!ok
# Wed Jul 10 19:27:48 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
# Wed Jul 10 19:27:52 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) AS "Category",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00')
GROUP BY 1
ORDER BY "count" DESC
LIMIT 101;
+-------------------+-------+
| Category          | count |
+-------------------+-------+
| Personal computer |  2856 |
| Smartphone        |  1558 |
| Tablet            |   102 |
| Game console      |     3 |
+-------------------+-------+
(4 rows)

!ok
# Wed Jul 10 19:27:52 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) AS "Category",
(COUNT(*)) AS "_cmp_count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Personal computer','Smartphone','Tablet','Game console','Smart TV',''))
GROUP BY 1
ORDER BY "_cmp_count" DESC
LIMIT 101;
+----------+------------+
| Category | _cmp_count |
+----------+------------+
+----------+------------+
(0 rows)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+---------------+-------+
| Browser       | count |
+---------------+-------+
| Mobile Safari |    88 |
| Silk          |     9 |
| Chrome Mobile |     5 |
+---------------+-------+
(3 rows)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet'))
GROUP BY ();
+-----+----+
| v0  | v1 |
+-----+----+
| 102 |  0 |
+-----+----+
(1 row)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet'))
GROUP BY 1;
+-------------------------+-------+
| __time                  | count |
+-------------------------+-------+
| 2019-08-25 02:00:00.000 |     4 |
| 2019-08-25 05:00:00.000 |     1 |
| 2019-08-25 06:00:00.000 |     1 |
| 2019-08-25 08:00:00.000 |     1 |
| 2019-08-25 00:00:00.000 |     2 |
| 2019-08-25 03:00:00.000 |     7 |
| 2019-08-25 04:00:00.000 |     2 |
| 2019-08-25 07:00:00.000 |     1 |
| 2019-08-25 09:00:00.000 |     4 |
| 2019-08-25 11:00:00.000 |     1 |
| 2019-08-25 13:00:00.000 |     4 |
| 2019-08-25 14:00:00.000 |     3 |
| 2019-08-25 16:00:00.000 |    10 |
+-------------------------+-------+
(13 rows)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Silk','Chrome Mobile','Puffin','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------------+-------------------------+-------+
| Browser       | __time                  | count |
+---------------+-------------------------+-------+
| Mobile Safari | 2019-08-25 02:00:00.000 |     4 |
| Mobile Safari | 2019-08-25 05:00:00.000 |     1 |
| Mobile Safari | 2019-08-25 06:00:00.000 |     1 |
| Mobile Safari | 2019-08-25 08:00:00.000 |     1 |
| Chrome Mobile | 2019-08-25 03:00:00.000 |     2 |
| Mobile Safari | 2019-08-25 00:00:00.000 |     2 |
| Mobile Safari | 2019-08-25 03:00:00.000 |     5 |
| Mobile Safari | 2019-08-25 04:00:00.000 |     2 |
| Mobile Safari | 2019-08-25 07:00:00.000 |     1 |
| Mobile Safari | 2019-08-25 09:00:00.000 |     4 |
| Mobile Safari | 2019-08-25 13:00:00.000 |     4 |
| Mobile Safari | 2019-08-25 14:00:00.000 |     3 |
| Mobile Safari | 2019-08-25 16:00:00.000 |     9 |
| Silk          | 2019-08-25 11:00:00.000 |     1 |
| Silk          | 2019-08-25 16:00:00.000 |     1 |
+---------------+-------------------------+-------+
(15 rows)

!ok
# Wed Jul 10 19:27:55 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND (CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR)='Tablet')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Silk','Chrome Mobile','Puffin','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------------+-------+
| Browser               | count |
+-----------------------+-------+
| Mobile Safari         |  1052 |
| Chrome Mobile         |   589 |
| Silk                  |     9 |
| Yandex.Browser mobile |     8 |
| Mobile Firefox        |     1 |
| Puffin                |     1 |
+-----------------------+-------+
(6 rows)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone'))
GROUP BY ();
+------+----+
| v0   | v1 |
+------+----+
| 1660 |  0 |
+------+----+
(1 row)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone'))
GROUP BY 1;
+-------------------------+-------+
| __time                  | count |
+-------------------------+-------+
| 2019-08-25 00:00:00.000 |    33 |
| 2019-08-25 01:00:00.000 |    33 |
| 2019-08-25 02:00:00.000 |    49 |
| 2019-08-25 03:00:00.000 |    31 |
| 2019-08-25 04:00:00.000 |    19 |
| 2019-08-25 05:00:00.000 |    35 |
| 2019-08-25 06:00:00.000 |    22 |
| 2019-08-25 07:00:00.000 |    18 |
| 2019-08-25 08:00:00.000 |    22 |
| 2019-08-25 09:00:00.000 |    20 |
| 2019-08-25 10:00:00.000 |    10 |
| 2019-08-25 11:00:00.000 |    23 |
| 2019-08-25 12:00:00.000 |    27 |
| 2019-08-25 13:00:00.000 |    49 |
| 2019-08-25 14:00:00.000 |    71 |
| 2019-08-25 15:00:00.000 |    35 |
| 2019-08-25 16:00:00.000 |   130 |
+-------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Chrome Mobile','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Opera Mobile','Android browser','IE Mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Chrome Mobile         | 2019-08-25 12:00:00.000 |    16 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |     9 |
| Chrome Mobile         | 2019-08-25 00:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |     6 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 09:00:00.000 |    10 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |     5 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |    19 |
| Chrome Mobile         | 2019-08-25 14:00:00.000 |    27 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |    20 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |    35 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |    22 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |    17 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |    33 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |    18 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |    13 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |    24 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |     6 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |     7 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |     6 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |    10 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |     3 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |     9 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |    30 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |    43 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |    15 |
| Mobile Safari         | 2019-08-25 16:00:00.000 |    94 |
| Puffin                | 2019-08-25 14:00:00.000 |     1 |
| Silk                  | 2019-08-25 11:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |     1 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |     2 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |     2 |
+-----------------------+-------------------------+-------+
(39 rows)

!ok
# Wed Jul 10 19:27:57 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Mobile Safari','Chrome Mobile','Silk','Yandex.Browser mobile','Mobile Firefox','Puffin','Opera Mobile','Android browser','IE Mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
# Wed Jul 10 19:27:58 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------------+-------+
| Browser               | count |
+-----------------------+-------+
| Chrome                |  2312 |
| Mobile Safari         |  1052 |
| Chrome Mobile         |   589 |
| Safari                |   386 |
| Firefox               |    72 |
| Yandex.Browser        |    39 |
| Opera                 |    22 |
| Mozilla               |    15 |
| IE                    |    10 |
| Silk                  |     9 |
| Yandex.Browser mobile |     8 |
| Mobile Firefox        |     1 |
| Puffin                |     1 |
+-----------------------+-------+
(13 rows)

!ok
# Wed Jul 10 19:27:58 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer'))
GROUP BY ();
+------+----+
| v0   | v1 |
+------+----+
| 4516 |  0 |
+------+----+
(1 row)

!ok
# Wed Jul 10 19:27:58 IST 2024
SELECT
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer'))
GROUP BY 1;
+-------------------------+-------+
| __time                  | count |
+-------------------------+-------+
| 2019-08-25 06:00:00.000 |    68 |
| 2019-08-25 15:00:00.000 |   124 |
| 2019-08-25 00:00:00.000 |   145 |
| 2019-08-25 01:00:00.000 |   112 |
| 2019-08-25 02:00:00.000 |   154 |
| 2019-08-25 03:00:00.000 |   110 |
| 2019-08-25 04:00:00.000 |    71 |
| 2019-08-25 05:00:00.000 |    87 |
| 2019-08-25 07:00:00.000 |    60 |
| 2019-08-25 08:00:00.000 |    55 |
| 2019-08-25 09:00:00.000 |    61 |
| 2019-08-25 10:00:00.000 |    53 |
| 2019-08-25 11:00:00.000 |    69 |
| 2019-08-25 12:00:00.000 |    89 |
| 2019-08-25 13:00:00.000 |   139 |
| 2019-08-25 14:00:00.000 |   181 |
| 2019-08-25 16:00:00.000 |   355 |
+-------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:27:58 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Chrome Mobile         | 2019-08-25 12:00:00.000 |    16 |
| Firefox               | 2019-08-25 08:00:00.000 |     2 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |     9 |
| Opera                 | 2019-08-25 00:00:00.000 |     1 |
| Opera                 | 2019-08-25 12:00:00.000 |     1 |
| Safari                | 2019-08-25 04:00:00.000 |    11 |
| Safari                | 2019-08-25 12:00:00.000 |     6 |
| Yandex.Browser        | 2019-08-25 08:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 10:00:00.000 |     4 |
| Yandex.Browser        | 2019-08-25 12:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 16:00:00.000 |     2 |
| Chrome                | 2019-08-25 00:00:00.000 |    91 |
| Chrome                | 2019-08-25 01:00:00.000 |    64 |
| Chrome                | 2019-08-25 02:00:00.000 |    89 |
| Chrome                | 2019-08-25 03:00:00.000 |    60 |
| Chrome                | 2019-08-25 04:00:00.000 |    41 |
| Chrome                | 2019-08-25 05:00:00.000 |    45 |
| Chrome                | 2019-08-25 06:00:00.000 |    39 |
| Chrome                | 2019-08-25 07:00:00.000 |    32 |
| Chrome                | 2019-08-25 08:00:00.000 |    28 |
| Chrome                | 2019-08-25 09:00:00.000 |    30 |
| Chrome                | 2019-08-25 10:00:00.000 |    36 |
| Chrome                | 2019-08-25 11:00:00.000 |    33 |
| Chrome                | 2019-08-25 12:00:00.000 |    51 |
| Chrome                | 2019-08-25 13:00:00.000 |    71 |
| Chrome                | 2019-08-25 14:00:00.000 |    85 |
| Chrome                | 2019-08-25 15:00:00.000 |    80 |
| Chrome                | 2019-08-25 16:00:00.000 |   176 |
| Chrome Mobile         | 2019-08-25 00:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |     6 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 09:00:00.000 |    10 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |     5 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |    19 |
| Chrome Mobile         | 2019-08-25 14:00:00.000 |    27 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |    20 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |    35 |
| Firefox               | 2019-08-25 00:00:00.000 |     5 |
| Firefox               | 2019-08-25 01:00:00.000 |     2 |
| Firefox               | 2019-08-25 02:00:00.000 |     5 |
| Firefox               | 2019-08-25 03:00:00.000 |     4 |
| Firefox               | 2019-08-25 05:00:00.000 |     2 |
| Firefox               | 2019-08-25 09:00:00.000 |     1 |
| Firefox               | 2019-08-25 10:00:00.000 |     3 |
| Firefox               | 2019-08-25 11:00:00.000 |     3 |
| Firefox               | 2019-08-25 12:00:00.000 |     3 |
| Firefox               | 2019-08-25 13:00:00.000 |     2 |
| Firefox               | 2019-08-25 14:00:00.000 |     6 |
| Firefox               | 2019-08-25 15:00:00.000 |     1 |
| Firefox               | 2019-08-25 16:00:00.000 |     4 |
| IE                    | 2019-08-25 03:00:00.000 |     1 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |    22 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |    17 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |    33 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |    18 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |    13 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |    24 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |     6 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |     7 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |     6 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |    10 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |     3 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |     9 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |    30 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |    43 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |    15 |
| Mobile Safari         | 2019-08-25 16:00:00.000 |    94 |
| Mozilla               | 2019-08-25 02:00:00.000 |     1 |
| Mozilla               | 2019-08-25 03:00:00.000 |     1 |
| Mozilla               | 2019-08-25 06:00:00.000 |     1 |
| Mozilla               | 2019-08-25 09:00:00.000 |     2 |
| Mozilla               | 2019-08-25 13:00:00.000 |     2 |
| Opera                 | 2019-08-25 01:00:00.000 |     4 |
| Opera                 | 2019-08-25 03:00:00.000 |     2 |
| Opera                 | 2019-08-25 06:00:00.000 |     2 |
| Opera                 | 2019-08-25 07:00:00.000 |     2 |
| Opera                 | 2019-08-25 09:00:00.000 |     1 |
| Opera                 | 2019-08-25 13:00:00.000 |     1 |
| Opera                 | 2019-08-25 16:00:00.000 |     3 |
| Safari                | 2019-08-25 00:00:00.000 |    14 |
| Safari                | 2019-08-25 01:00:00.000 |     9 |
| Safari                | 2019-08-25 02:00:00.000 |    10 |
| Safari                | 2019-08-25 03:00:00.000 |    11 |
| Safari                | 2019-08-25 05:00:00.000 |     5 |
| Safari                | 2019-08-25 06:00:00.000 |     1 |
| Safari                | 2019-08-25 07:00:00.000 |     6 |
| Safari                | 2019-08-25 08:00:00.000 |     2 |
| Safari                | 2019-08-25 09:00:00.000 |     4 |
| Safari                | 2019-08-25 11:00:00.000 |     4 |
| Safari                | 2019-08-25 13:00:00.000 |     9 |
| Safari                | 2019-08-25 14:00:00.000 |    14 |
| Safari                | 2019-08-25 15:00:00.000 |     8 |
| Safari                | 2019-08-25 16:00:00.000 |    40 |
| Silk                  | 2019-08-25 11:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 00:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 06:00:00.000 |     3 |
| Yandex.Browser        | 2019-08-25 07:00:00.000 |     2 |
| Yandex.Browser        | 2019-08-25 09:00:00.000 |     3 |
| Yandex.Browser        | 2019-08-25 11:00:00.000 |     6 |
| Yandex.Browser        | 2019-08-25 13:00:00.000 |     5 |
| Yandex.Browser        | 2019-08-25 14:00:00.000 |     5 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |     2 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |     2 |
+-----------------------+-------------------------+-------+
(111 rows)

!ok
# Wed Jul 10 19:27:59 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console'))
GROUP BY 1
ORDER BY "count" DESC
LIMIT 1000;
+-----------------------+-------+
| Browser               | count |
+-----------------------+-------+
| Chrome                |  2313 |
| Mobile Safari         |  1052 |
| Chrome Mobile         |   589 |
| Safari                |   386 |
| Firefox               |    72 |
| Yandex.Browser        |    39 |
| Opera                 |    22 |
| Mozilla               |    15 |
| IE                    |    10 |
| Silk                  |     9 |
| Yandex.Browser mobile |     8 |
| PS4 Web browser       |     2 |
| Mobile Firefox        |     1 |
| Puffin                |     1 |
+-----------------------+-------+
(14 rows)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00'))) AS "v0",
(COUNT(*) FILTER (WHERE (TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 00:00:00'))) AS "v1"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-26 00:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console'))
GROUP BY ();
+------+----+
| v0   | v1 |
+------+----+
| 4519 |  0 |
+------+----+
(1 row)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE ((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console'))
GROUP BY 1;
+-------------------------+-------+
| __time                  | count |
+-------------------------+-------+
| 2019-08-25 06:00:00.000 |    68 |
| 2019-08-25 15:00:00.000 |   124 |
| 2019-08-25 00:00:00.000 |   145 |
| 2019-08-25 01:00:00.000 |   112 |
| 2019-08-25 02:00:00.000 |   154 |
| 2019-08-25 03:00:00.000 |   112 |
| 2019-08-25 04:00:00.000 |    71 |
| 2019-08-25 05:00:00.000 |    87 |
| 2019-08-25 07:00:00.000 |    60 |
| 2019-08-25 08:00:00.000 |    55 |
| 2019-08-25 09:00:00.000 |    61 |
| 2019-08-25 10:00:00.000 |    53 |
| 2019-08-25 11:00:00.000 |    69 |
| 2019-08-25 12:00:00.000 |    89 |
| 2019-08-25 13:00:00.000 |   139 |
| 2019-08-25 14:00:00.000 |   181 |
| 2019-08-25 16:00:00.000 |   356 |
+-------------------------+-------+
(17 rows)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-25 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-25 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+-----------------------+-------------------------+-------+
| Browser               | __time                  | count |
+-----------------------+-------------------------+-------+
| Chrome Mobile         | 2019-08-25 12:00:00.000 |    16 |
| Firefox               | 2019-08-25 08:00:00.000 |     2 |
| Mobile Safari         | 2019-08-25 12:00:00.000 |     9 |
| Opera                 | 2019-08-25 00:00:00.000 |     1 |
| Opera                 | 2019-08-25 12:00:00.000 |     1 |
| Safari                | 2019-08-25 04:00:00.000 |    11 |
| Safari                | 2019-08-25 12:00:00.000 |     6 |
| Yandex.Browser        | 2019-08-25 08:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 10:00:00.000 |     4 |
| Yandex.Browser        | 2019-08-25 12:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 16:00:00.000 |     2 |
| Chrome                | 2019-08-25 00:00:00.000 |    91 |
| Chrome                | 2019-08-25 01:00:00.000 |    64 |
| Chrome                | 2019-08-25 02:00:00.000 |    89 |
| Chrome                | 2019-08-25 03:00:00.000 |    60 |
| Chrome                | 2019-08-25 04:00:00.000 |    41 |
| Chrome                | 2019-08-25 05:00:00.000 |    45 |
| Chrome                | 2019-08-25 06:00:00.000 |    39 |
| Chrome                | 2019-08-25 07:00:00.000 |    32 |
| Chrome                | 2019-08-25 08:00:00.000 |    28 |
| Chrome                | 2019-08-25 09:00:00.000 |    30 |
| Chrome                | 2019-08-25 10:00:00.000 |    36 |
| Chrome                | 2019-08-25 11:00:00.000 |    33 |
| Chrome                | 2019-08-25 12:00:00.000 |    51 |
| Chrome                | 2019-08-25 13:00:00.000 |    71 |
| Chrome                | 2019-08-25 14:00:00.000 |    85 |
| Chrome                | 2019-08-25 15:00:00.000 |    80 |
| Chrome                | 2019-08-25 16:00:00.000 |   177 |
| Chrome Mobile         | 2019-08-25 00:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 01:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 02:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 03:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 04:00:00.000 |     6 |
| Chrome Mobile         | 2019-08-25 05:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 06:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 07:00:00.000 |    11 |
| Chrome Mobile         | 2019-08-25 08:00:00.000 |    16 |
| Chrome Mobile         | 2019-08-25 09:00:00.000 |    10 |
| Chrome Mobile         | 2019-08-25 10:00:00.000 |     5 |
| Chrome Mobile         | 2019-08-25 11:00:00.000 |    13 |
| Chrome Mobile         | 2019-08-25 13:00:00.000 |    19 |
| Chrome Mobile         | 2019-08-25 14:00:00.000 |    27 |
| Chrome Mobile         | 2019-08-25 15:00:00.000 |    20 |
| Chrome Mobile         | 2019-08-25 16:00:00.000 |    35 |
| Firefox               | 2019-08-25 00:00:00.000 |     5 |
| Firefox               | 2019-08-25 01:00:00.000 |     2 |
| Firefox               | 2019-08-25 02:00:00.000 |     5 |
| Firefox               | 2019-08-25 03:00:00.000 |     4 |
| Firefox               | 2019-08-25 05:00:00.000 |     2 |
| Firefox               | 2019-08-25 09:00:00.000 |     1 |
| Firefox               | 2019-08-25 10:00:00.000 |     3 |
| Firefox               | 2019-08-25 11:00:00.000 |     3 |
| Firefox               | 2019-08-25 12:00:00.000 |     3 |
| Firefox               | 2019-08-25 13:00:00.000 |     2 |
| Firefox               | 2019-08-25 14:00:00.000 |     6 |
| Firefox               | 2019-08-25 15:00:00.000 |     1 |
| Firefox               | 2019-08-25 16:00:00.000 |     4 |
| IE                    | 2019-08-25 03:00:00.000 |     1 |
| Mobile Safari         | 2019-08-25 00:00:00.000 |    22 |
| Mobile Safari         | 2019-08-25 01:00:00.000 |    17 |
| Mobile Safari         | 2019-08-25 02:00:00.000 |    33 |
| Mobile Safari         | 2019-08-25 03:00:00.000 |    18 |
| Mobile Safari         | 2019-08-25 04:00:00.000 |    13 |
| Mobile Safari         | 2019-08-25 05:00:00.000 |    24 |
| Mobile Safari         | 2019-08-25 06:00:00.000 |     6 |
| Mobile Safari         | 2019-08-25 07:00:00.000 |     7 |
| Mobile Safari         | 2019-08-25 08:00:00.000 |     6 |
| Mobile Safari         | 2019-08-25 09:00:00.000 |    10 |
| Mobile Safari         | 2019-08-25 10:00:00.000 |     3 |
| Mobile Safari         | 2019-08-25 11:00:00.000 |     9 |
| Mobile Safari         | 2019-08-25 13:00:00.000 |    30 |
| Mobile Safari         | 2019-08-25 14:00:00.000 |    43 |
| Mobile Safari         | 2019-08-25 15:00:00.000 |    15 |
| Mobile Safari         | 2019-08-25 16:00:00.000 |    94 |
| Mozilla               | 2019-08-25 02:00:00.000 |     1 |
| Mozilla               | 2019-08-25 03:00:00.000 |     1 |
| Mozilla               | 2019-08-25 06:00:00.000 |     1 |
| Mozilla               | 2019-08-25 09:00:00.000 |     2 |
| Mozilla               | 2019-08-25 13:00:00.000 |     2 |
| Opera                 | 2019-08-25 01:00:00.000 |     4 |
| Opera                 | 2019-08-25 03:00:00.000 |     2 |
| Opera                 | 2019-08-25 06:00:00.000 |     2 |
| Opera                 | 2019-08-25 07:00:00.000 |     2 |
| Opera                 | 2019-08-25 09:00:00.000 |     1 |
| Opera                 | 2019-08-25 13:00:00.000 |     1 |
| Opera                 | 2019-08-25 16:00:00.000 |     3 |
| Safari                | 2019-08-25 00:00:00.000 |    14 |
| Safari                | 2019-08-25 01:00:00.000 |     9 |
| Safari                | 2019-08-25 02:00:00.000 |    10 |
| Safari                | 2019-08-25 03:00:00.000 |    11 |
| Safari                | 2019-08-25 05:00:00.000 |     5 |
| Safari                | 2019-08-25 06:00:00.000 |     1 |
| Safari                | 2019-08-25 07:00:00.000 |     6 |
| Safari                | 2019-08-25 08:00:00.000 |     2 |
| Safari                | 2019-08-25 09:00:00.000 |     4 |
| Safari                | 2019-08-25 11:00:00.000 |     4 |
| Safari                | 2019-08-25 13:00:00.000 |     9 |
| Safari                | 2019-08-25 14:00:00.000 |    14 |
| Safari                | 2019-08-25 15:00:00.000 |     8 |
| Safari                | 2019-08-25 16:00:00.000 |    40 |
| Silk                  | 2019-08-25 11:00:00.000 |     1 |
| Silk                  | 2019-08-25 16:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 00:00:00.000 |     1 |
| Yandex.Browser        | 2019-08-25 06:00:00.000 |     3 |
| Yandex.Browser        | 2019-08-25 07:00:00.000 |     2 |
| Yandex.Browser        | 2019-08-25 09:00:00.000 |     3 |
| Yandex.Browser        | 2019-08-25 11:00:00.000 |     6 |
| Yandex.Browser        | 2019-08-25 13:00:00.000 |     5 |
| Yandex.Browser        | 2019-08-25 14:00:00.000 |     5 |
| Yandex.Browser mobile | 2019-08-25 10:00:00.000 |     2 |
| Yandex.Browser mobile | 2019-08-25 12:00:00.000 |     2 |
+-----------------------+-------------------------+-------+
(111 rows)

!ok
# Wed Jul 10 19:28:02 IST 2024
SELECT
CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) AS "Browser",
TIME_FLOOR(CAST(t."__time" AS TIMESTAMP), 'PT1H', NULL, 'Etc/UTC') AS "__time",
(COUNT(*)) AS "count"
FROM "kttm_nested" AS t
WHERE (((TIMESTAMP '2019-08-24 00:00:00'<=CAST(t."__time" AS TIMESTAMP) AND CAST(t."__time" AS TIMESTAMP)<TIMESTAMP '2019-08-24 17:00:00') AND CAST(JSON_VALUE("t"."agent",'$.category') AS VARCHAR) IN ('Tablet','Smartphone','Personal computer','Game console')) AND CAST(JSON_VALUE("t"."agent",'$.browser') AS VARCHAR) IN ('Chrome','Mobile Safari','Chrome Mobile','Safari','Firefox','Yandex.Browser','Opera','IE','Mozilla','Silk','Yandex.Browser mobile'))
GROUP BY 1,2;
+---------+--------+-------+
| Browser | __time | count |
+---------+--------+-------+
+---------+--------+-------+
(0 rows)

!ok
