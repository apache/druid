<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/modules">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.22">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131010415-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-131010415-1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Apache Druid" href="/opensearch.xml">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
<link rel="stylesheet" href="/css/code-block-buttons.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<script src="/js/code-block-buttons.js"></script><title data-rh="true">Creating extensions | Apache Druid</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://druid.apache.org/img/druid_nav.png"><meta data-rh="true" name="twitter:image" content="https://druid.apache.org/img/druid_nav.png"><meta data-rh="true" property="og:url" content="https://druid.apache.org/docs/development/modules"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Creating extensions | Apache Druid"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://druid.apache.org/docs/development/modules"><link data-rh="true" rel="alternate" href="https://druid.apache.org/docs/development/modules" hreflang="en"><link data-rh="true" rel="alternate" href="https://druid.apache.org/docs/development/modules" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://CPK9PMSCEY-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f9da320f.css">
<link rel="preload" href="/assets/js/runtime~main.48cb3551.js" as="script">
<link rel="preload" href="/assets/js/main.fe95e508.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/druid_nav.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/druid_nav.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Apache Druid</b></a><a class="navbar__item navbar__link" href="/technology">Technology</a><a class="navbar__item navbar__link" href="/use-cases">Use Cases</a><a class="navbar__item navbar__link" href="/druid-powered">Powered By</a><a class="navbar__item navbar__link" href="/docs/design/index">Docs</a><a class="navbar__item navbar__link" href="/community/">Community</a><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Apache<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/downloads.html">Download</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/design/">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tutorials/tutorial-batch">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/design/architecture">Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ingestion/">Ingestion</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/data-management/">Data management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/querying/sql">Querying</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/configuration/">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/operations/web-console">Operations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/development/overview">Development</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/overview">Developing on Druid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/development/modules">Creating extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/javascript">JavaScript functionality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/build">Build from source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/versioning">Versioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/experimental">Experimental features</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/misc/papers-and-talks">Misc</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/comparisons/druid-vs-elasticsearch">Hidden</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Creating extensions</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Creating extensions</h1></header><p>Druid uses a module system that allows for the addition of extensions at runtime.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="writing-your-own-extensions">Writing your own extensions<a class="hash-link" href="#writing-your-own-extensions" title="Direct link to heading">​</a></h2><p>Druid&#x27;s extensions leverage Guice in order to add things at runtime.  Basically, Guice is a framework for Dependency Injection, but we use it to hold the expected object graph of the Druid process.  Extensions can make any changes they want/need to the object graph via adding Guice bindings.  While the extensions actually give you the capability to change almost anything however you want, in general, we expect people to want to extend one of the things listed below.  This means that we honor our <a href="/docs/development/versioning">versioning strategy</a> for changes that affect the interfaces called out on this page, but other interfaces are deemed &quot;internal&quot; and can be changed in an incompatible manner even between patch releases.</p><ol><li>Add a new deep storage implementation by extending the <code>org.apache.druid.segment.loading.DataSegment*</code> and
<code>org.apache.druid.tasklogs.TaskLog*</code> classes.</li><li>Add a new input source by extending <code>org.apache.druid.data.input.InputSource</code>.</li><li>Add a new input entity by extending <code>org.apache.druid.data.input.InputEntity</code>.</li><li>Add a new input source reader if necessary by extending <code>org.apache.druid.data.input.InputSourceReader</code>. You can use <code>org.apache.druid.data.input.impl.InputEntityIteratingReader</code> in most cases.</li><li>Add a new input format by extending <code>org.apache.druid.data.input.InputFormat</code>.</li><li>Add a new input entity reader by extending <code>org.apache.druid.data.input.TextReader</code> for text formats or <code>org.apache.druid.data.input.IntermediateRowParsingReader</code> for binary formats.</li><li>Add Aggregators by extending <code>org.apache.druid.query.aggregation.AggregatorFactory</code>, <code>org.apache.druid.query.aggregation.Aggregator</code>,
and <code>org.apache.druid.query.aggregation.BufferAggregator</code>.</li><li>Add PostAggregators by extending <code>org.apache.druid.query.aggregation.PostAggregator</code>.</li><li>Add ExtractionFns by extending <code>org.apache.druid.query.extraction.ExtractionFn</code>.</li><li>Add Complex metrics by extending <code>org.apache.druid.segment.serde.ComplexMetricSerde</code>.</li><li>Add new Query types by extending <code>org.apache.druid.query.QueryRunnerFactory</code>, <code>org.apache.druid.query.QueryToolChest</code>, and
<code>org.apache.druid.query.Query</code>.</li><li>Add new Jersey resources by calling <code>Jerseys.addResource(binder, clazz)</code>.</li><li>Add new Jetty filters by extending <code>org.apache.druid.server.initialization.jetty.ServletFilterHolder</code>.</li><li>Add new secret providers by extending <code>org.apache.druid.metadata.PasswordProvider</code>.</li><li>Add new dynamic configuration providers by extending <code>org.apache.druid.metadata.DynamicConfigProvider</code>.</li><li>Add new ingest transform by implementing the <code>org.apache.druid.segment.transform.Transform</code> interface from the <code>druid-processing</code> package.</li><li>Bundle your extension with all the other Druid extensions</li></ol><p>Extensions are added to the system via an implementation of <code>org.apache.druid.initialization.DruidModule</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-druid-module">Creating a Druid Module<a class="hash-link" href="#creating-a-druid-module" title="Direct link to heading">​</a></h3><p>The DruidModule class is has two methods</p><ol><li>A <code>configure(Binder)</code> method</li><li>A <code>getJacksonModules()</code> method</li></ol><p>The <code>configure(Binder)</code> method is the same method that a normal Guice module would have.</p><p>The <code>getJacksonModules()</code> method provides a list of Jackson modules that are used to help initialize the Jackson ObjectMapper instances used by Druid.  This is how you add extensions that are instantiated via Jackson (like AggregatorFactory and InputSource objects) to Druid.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="registering-your-druid-module">Registering your Druid Module<a class="hash-link" href="#registering-your-druid-module" title="Direct link to heading">​</a></h3><p>Once you have your DruidModule created, you will need to package an extra file in the <code>META-INF/services</code> directory of your jar.  This is easiest to accomplish with a maven project by creating files in the <code>src/main/resources</code> directory.  There are examples of this in the Druid code under the <code>cassandra-storage</code>, <code>hdfs-storage</code> and <code>s3-extensions</code> modules, for examples.</p><p>The file that should exist in your jar is</p><p><code>META-INF/services/org.apache.druid.initialization.DruidModule</code></p><p>It should be a text file with a new-line delimited list of package-qualified classes that implement DruidModule like</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">org.apache.druid.storage.cassandra.CassandraDruidModule</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If your jar has this file, then when it is added to the classpath or as an extension, Druid will notice the file and will instantiate instances of the Module.  Your Module should have a default constructor, but if you need access to runtime configuration properties, it can have a method with @Inject on it to get a Properties object injected into it from Guice.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-deep-storage-implementation">Adding a new deep storage implementation<a class="hash-link" href="#adding-a-new-deep-storage-implementation" title="Direct link to heading">​</a></h3><p>Check the <code>azure-storage</code>, <code>google-storage</code>, <code>cassandra-storage</code>, <code>hdfs-storage</code> and <code>s3-extensions</code> modules for examples of how to do this.</p><p>The basic idea behind the extension is that you need to add bindings for your DataSegmentPusher and DataSegmentPuller objects.  The way to add them is something like (taken from HdfsStorageDruidModule)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Binders.dataSegmentPullerBinder(binder)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       .addBinding(&quot;hdfs&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       .to(HdfsDataSegmentPuller.class).in(LazySingleton.class);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Binders.dataSegmentPusherBinder(binder)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       .addBinding(&quot;hdfs&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       .to(HdfsDataSegmentPusher.class).in(LazySingleton.class);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Binders.dataSegment*Binder()</code> is a call provided by the druid-core jar which sets up a Guice multibind &quot;MapBinder&quot;.  If that doesn&#x27;t make sense, don&#x27;t worry about it, just think of it as a magical incantation.</p><p><code>addBinding(&quot;hdfs&quot;)</code> for the Puller binder creates a new handler for loadSpec objects of type &quot;hdfs&quot;.  For the Pusher binder it creates a new type value that you can specify for the <code>druid.storage.type</code> parameter.</p><p><code>to(...).in(...);</code> is normal Guice stuff.</p><p>In addition to DataSegmentPusher and DataSegmentPuller, you can also bind:</p><ul><li>DataSegmentKiller: Removes segments, used as part of the Kill Task to delete unused segments, i.e. perform garbage collection of segments that are either superseded by newer versions or that have been dropped from the cluster.</li><li>DataSegmentMover: Allow migrating segments from one place to another, currently this is only used as part of the MoveTask to move unused segments to a different S3 bucket or prefix, typically to reduce storage costs of unused data (e.g. move to glacier or cheaper storage)</li><li>DataSegmentArchiver: Just a wrapper around Mover, but comes with a pre-configured target bucket/path, so it doesn&#x27;t have to be specified at runtime as part of the ArchiveTask.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validating-your-deep-storage-implementation">Validating your deep storage implementation<a class="hash-link" href="#validating-your-deep-storage-implementation" title="Direct link to heading">​</a></h3><p><strong>WARNING!</strong> This is not a formal procedure, but a collection of hints to validate if your new deep storage implementation is able do push, pull and kill segments.</p><p>It&#x27;s recommended to use batch ingestion tasks to validate your implementation.
The segment will be automatically rolled up to Historical note after ~20 seconds.
In this way, you can validate both push (at realtime process) and pull (at Historical process) segments.</p><ul><li>DataSegmentPusher</li></ul><p>Wherever your data storage (cloud storage service, distributed file system, etc.) is, you should be able to see one new file: <code>index.zip</code> (<code>partitionNum_index.zip</code> for HDFS data storage) after your ingestion task ends.</p><ul><li>DataSegmentPuller</li></ul><p>After ~20 secs your ingestion task ends, you should be able to see your Historical process trying to load the new segment.</p><p>The following example was retrieved from a Historical process configured to use Azure for deep storage:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">2015-04-14T02:42:33,450 INFO [ZkCoordinator-0] org.apache.druid.server.coordination.ZkCoordinator - New request[LOAD: dde_2015-01-02T00:00:00.000Z_2015-01-03T00:00:00</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">.000Z_2015-04-14T02:41:09.484Z] with zNode[/druid/dev/loadQueue/192.168.33.104:8081/dde_2015-01-02T00:00:00.000Z_2015-01-03T00:00:00.000Z_2015-04-14T02:41:09.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">484Z].</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2015-04-14T02:42:33,451 INFO [ZkCoordinator-0] org.apache.druid.server.coordination.ZkCoordinator - Loading segment dde_2015-01-02T00:00:00.000Z_2015-01-03T00:00:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">00Z_2015-04-14T02:41:09.484Z</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2015-04-14T02:42:33,463 INFO [ZkCoordinator-0] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.storage.azure.AzureAccountConfig] from props[drui</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">d.azure.] as [org.apache.druid.storage.azure.AzureAccountConfig@759c9ad9]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2015-04-14T02:49:08,275 INFO [ZkCoordinator-0] org.apache.druid.utils.CompressionUtils - Unzipping file[/opt/druid/tmp/compressionUtilZipCache1263964429587449785.z</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ip] to [/opt/druid/zk_druid/dde/2015-01-02T00:00:00.000Z_2015-01-03T00:00:00.000Z/2015-04-14T02:41:09.484Z/0]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2015-04-14T02:49:08,276 INFO [ZkCoordinator-0] org.apache.druid.storage.azure.AzureDataSegmentPuller - Loaded 1196 bytes from [dde/2015-01-02T00:00:00.000Z_2015-01-03</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">T00:00:00.000Z/2015-04-14T02:41:09.484Z/0/index.zip] to [/opt/druid/zk_druid/dde/2015-01-02T00:00:00.000Z_2015-01-03T00:00:00.000Z/2015-04-14T02:41:09.484Z/0]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2015-04-14T02:49:08,277 WARN [ZkCoordinator-0] org.apache.druid.segment.loading.SegmentLocalCacheManager - Segment [dde_2015-01-02T00:00:00.000Z_2015-01-03T00:00:00.000Z_2015-04-14T02:41:09.484Z] is different than expected size. Expected [0] found [1196]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2015-04-14T02:49:08,282 INFO [ZkCoordinator-0] org.apache.druid.server.coordination.BatchDataSegmentAnnouncer - Announcing segment[dde_2015-01-02T00:00:00.000Z_2015-01-03T00:00:00.000Z_2015-04-14T02:41:09.484Z] at path[/druid/dev/segments/192.168.33.104:8081/192.168.33.104:8081_historical__default_tier_2015-04-14T02:49:08.282Z_7bb87230ebf940188511dd4a53ffd7351]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2015-04-14T02:49:08,292 INFO [ZkCoordinator-0] org.apache.druid.server.coordination.ZkCoordinator - Completed request [LOAD: dde_2015-01-02T00:00:00.000Z_2015-01-03T00:00:00.000Z_2015-04-14T02:41:09.484Z]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>DataSegmentKiller</li></ul><p>The easiest way of testing the segment killing is marking a segment as not used and then starting a killing task in the <a href="/docs/operations/web-console">web console</a>.</p><p>To mark a segment as not used, you need to connect to your metadata storage and update the <code>used</code> column to <code>false</code> on the segment table rows.</p><p>To start a segment killing task, you need to access the web console then select <code>issue kill task</code> for the appropriate datasource.</p><p>After the killing task ends, <code>index.zip</code> (<code>partitionNum_index.zip</code> for HDFS data storage) file should be deleted from the data storage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-support-for-a-new-input-source">Adding support for a new input source<a class="hash-link" href="#adding-support-for-a-new-input-source" title="Direct link to heading">​</a></h3><p>Adding support for a new input source requires to implement three interfaces, i.e., <code>InputSource</code>, <code>InputEntity</code>, and <code>InputSourceReader</code>.
<code>InputSource</code> is to define where the input data is stored. <code>InputEntity</code> is to define how data can be read in parallel
in <a href="/docs/ingestion/native-batch">native parallel indexing</a>.
<code>InputSourceReader</code> defines how to read your new input source and you can simply use the provided <code>InputEntityIteratingReader</code> in most cases.</p><p>There is an example of this in the <code>druid-s3-extensions</code> module with the <code>S3InputSource</code> and <code>S3Entity</code>.</p><p>Adding an InputSource is done almost entirely through the Jackson Modules instead of Guice. Specifically, note the implementation</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public List&lt;? extends Module&gt; getJacksonModules()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return ImmutableList.of(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          new SimpleModule().registerSubtypes(new NamedType(S3InputSource.class, &quot;s3&quot;))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is registering the InputSource with Jackson&#x27;s polymorphic serialization/deserialization layer.  More concretely, having this will mean that if you specify a <code>&quot;inputSource&quot;: { &quot;type&quot;: &quot;s3&quot;, ... }</code> in your IO config, then the system will load this InputSource for your <code>InputSource</code> implementation.</p><p>Note that inside of Druid, we have made the <code>@JacksonInject</code> annotation for Jackson deserialized objects actually use the base Guice injector to resolve the object to be injected.  So, if your InputSource needs access to some object, you can add a <code>@JacksonInject</code> annotation on a setter and it will get set on instantiation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-support-for-a-new-data-format">Adding support for a new data format<a class="hash-link" href="#adding-support-for-a-new-data-format" title="Direct link to heading">​</a></h3><p>Adding support for a new data format requires implementing two interfaces, i.e., <code>InputFormat</code> and <code>InputEntityReader</code>.
<code>InputFormat</code> is to define how your data is formatted. <code>InputEntityReader</code> is to define how to parse your data and convert into Druid <code>InputRow</code>.</p><p>There is an example in the <code>druid-orc-extensions</code> module with the <code>OrcInputFormat</code> and <code>OrcReader</code>.</p><p>Adding an InputFormat is very similar to adding an InputSource. They operate purely through Jackson and thus should just be additions to the Jackson modules returned by your DruidModule.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-aggregators">Adding Aggregators<a class="hash-link" href="#adding-aggregators" title="Direct link to heading">​</a></h3><p>Adding AggregatorFactory objects is very similar to InputSource objects.  They operate purely through Jackson and thus should just be additions to the Jackson modules returned by your DruidModule.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-complex-metrics">Adding Complex Metrics<a class="hash-link" href="#adding-complex-metrics" title="Direct link to heading">​</a></h3><p>Adding ComplexMetrics is a little ugly in the current version.  The method of getting at complex metrics is through registration with the <code>ComplexMetrics.registerSerde()</code> method.  There is no special Guice stuff to get this working, just in your <code>configure(Binder)</code> method register the serialization/deserialization.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-query-types">Adding new Query types<a class="hash-link" href="#adding-new-query-types" title="Direct link to heading">​</a></h3><p>Adding a new Query type requires the implementation of three interfaces.</p><ol><li><code>org.apache.druid.query.Query</code></li><li><code>org.apache.druid.query.QueryToolChest</code></li><li><code>org.apache.druid.query.QueryRunnerFactory</code></li></ol><p>Registering these uses the same general strategy as a deep storage mechanism does.  You do something like</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">DruidBinders.queryToolChestBinder(binder)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            .addBinding(SegmentMetadataQuery.class)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            .to(SegmentMetadataQueryQueryToolChest.class);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DruidBinders.queryRunnerFactoryBinder(binder)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            .addBinding(SegmentMetadataQuery.class)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            .to(SegmentMetadataQueryRunnerFactory.class);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first one binds the SegmentMetadataQueryQueryToolChest for usage when a SegmentMetadataQuery is used.  The second one does the same thing but for the QueryRunnerFactory instead.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-jersey-resources">Adding new Jersey resources<a class="hash-link" href="#adding-new-jersey-resources" title="Direct link to heading">​</a></h3><p>Adding new Jersey resources to a module requires calling the following code to bind the resource in the module:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jerseys.addResource(binder, NewResource.class);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-password-provider-implementation">Adding a new Password Provider implementation<a class="hash-link" href="#adding-a-new-password-provider-implementation" title="Direct link to heading">​</a></h3><p>You will need to implement <code>org.apache.druid.metadata.PasswordProvider</code> interface. For every place where Druid uses PasswordProvider, a new instance of the implementation will be created,
thus make sure all the necessary information required for fetching each password is supplied during object instantiation.
In your implementation of <code>org.apache.druid.initialization.DruidModule</code>, <code>getJacksonModules</code> should look something like this -</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return ImmutableList.of(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        new SimpleModule(&quot;SomePasswordProviderModule&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            .registerSubtypes(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                new NamedType(SomePasswordProvider.class, &quot;some&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>SomePasswordProvider</code> is the implementation of <code>PasswordProvider</code> interface, you can have a look at <code>org.apache.druid.metadata.EnvironmentVariablePasswordProvider</code> for example.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-dynamicconfigprovider-implementation">Adding a new DynamicConfigProvider implementation<a class="hash-link" href="#adding-a-new-dynamicconfigprovider-implementation" title="Direct link to heading">​</a></h3><p>You will need to implement <code>org.apache.druid.metadata.DynamicConfigProvider</code> interface. For every place where Druid uses DynamicConfigProvider, a new instance of the implementation will be created,
thus make sure all the necessary information required for fetching all information is supplied during object instantiation.
In your implementation of <code>org.apache.druid.initialization.DruidModule</code>, <code>getJacksonModules</code> should look something like this -</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return ImmutableList.of(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        new SimpleModule(&quot;SomeDynamicConfigProviderModule&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            .registerSubtypes(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                new NamedType(SomeDynamicConfigProvider.class, &quot;some&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>SomeDynamicConfigProvider</code> is the implementation of <code>DynamicConfigProvider</code> interface, you can have a look at <code>org.apache.druid.metadata.MapStringDynamicConfigProvider</code> for example.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-transform-extension">Adding a Transform Extension<a class="hash-link" href="#adding-a-transform-extension" title="Direct link to heading">​</a></h3><p>To create a transform extension implement the <code>org.apache.druid.segment.transform.Transform</code> interface. You&#x27;ll need to install the <code>druid-processing</code> package to import <code>org.apache.druid.segment.transform</code>.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.fasterxml.jackson.annotation.JsonCreator;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.fasterxml.jackson.annotation.JsonProperty;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.apache.druid.segment.transform.RowFunction;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.apache.druid.segment.transform.Transform;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class MyTransform implements Transform {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private final String name;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @JsonCreator</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public MyTransform(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        @JsonProperty(&quot;name&quot;) final String name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @JsonProperty</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public RowFunction getRowFunction() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return new MyRowFunction();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    static class MyRowFunction implements RowFunction {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public Object eval(Row row) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;transformed-value&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then register your transform as a Jackson module.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.fasterxml.jackson.databind.Module;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.fasterxml.jackson.databind.jsontype.NamedModule;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.fasterxml.jackson.databind.module.SimpleModule;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.google.inject.Binder;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.google.common.collect.ImmutableList;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.apache.druid.initialization.DruidModule;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class MyTransformModule implements DruidModule {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public List&lt;? extends Module&gt; getJacksonModules() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return return ImmutableList.of(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            new SimpleModule(&quot;MyTransformModule&quot;).registerSubtypes(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                new NamedType(MyTransform.class, &quot;my-transform&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void configure(Binder binder) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-your-own-custom-pluggable-coordinator-duty">Adding your own custom pluggable Coordinator Duty<a class="hash-link" href="#adding-your-own-custom-pluggable-coordinator-duty" title="Direct link to heading">​</a></h3><p>The coordinator periodically runs jobs, so-called <code>CoordinatorDuty</code> which include loading new segments, segment balancing, etc.
Druid users can add custom pluggable coordinator duties, which are not part of Core Druid, without modifying any Core Druid classes.
Users can do this by writing their own custom coordinator duty implementing the interface <code>CoordinatorCustomDuty</code> and setting the <code>JsonTypeName</code>.
Next, users will need to register their custom coordinator as subtypes in their Module&#x27;s <code>DruidModule#getJacksonModules()</code>.
Once these steps are done, user will be able to load their custom coordinator duty using the following properties:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.dutyGroups=[&lt;GROUP_NAME_1&gt;, &lt;GROUP_NAME_2&gt;, ...]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.&lt;GROUP_NAME_1&gt;.duties=[&lt;DUTY_NAME_MATCHING_JSON_TYPE_NAME_1&gt;, &lt;DUTY_NAME_MATCHING_JSON_TYPE_NAME_2&gt;, ...]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.&lt;GROUP_NAME_1&gt;.period=&lt;GROUP_NAME_1_RUN_PERIOD&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.&lt;GROUP_NAME_1&gt;.duty.&lt;DUTY_NAME_MATCHING_JSON_TYPE_NAME_1&gt;.&lt;SOME_CONFIG_1_KEY&gt;=&lt;SOME_CONFIG_1_VALUE&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.&lt;GROUP_NAME_1&gt;.duty.&lt;DUTY_NAME_MATCHING_JSON_TYPE_NAME_1&gt;.&lt;SOME_CONFIG_2_KEY&gt;=&lt;SOME_CONFIG_2_VALUE&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the new system for pluggable Coordinator duties, similar to what coordinator already does today, the duties can be grouped together.
The duties will be grouped into multiple groups as per the elements in list <code>druid.coordinator.dutyGroups</code>.
All duties in the same group will have the same run period configured by <code>druid.coordinator.&lt;GROUP_NAME&gt;.period</code>.
Currently, there is a single thread running the duties sequentially for each group. </p><p>For example, see <code>KillSupervisorsCustomDuty</code> for a custom coordinator duty implementation and the <code>custom-coordinator-duties</code>
integration test group which loads <code>KillSupervisorsCustomDuty</code> using the configs set in <code>integration-tests/docker/environment-configs/test-groups/custom-coordinator-duties</code>.
This config file adds the configs below to enable a custom coordinator duty.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.dutyGroups=[&quot;cleanupMetadata&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.cleanupMetadata.duties=[&quot;killSupervisors&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.cleanupMetadata.duty.killSupervisors.retainDuration=PT0M</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">druid.coordinator.cleanupMetadata.period=PT10S</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These configurations create a custom coordinator duty group called <code>cleanupMetadata</code> which runs a custom coordinator duty called <code>killSupervisors</code> every 10 seconds.
The custom coordinator duty <code>killSupervisors</code> also has a config called <code>retainDuration</code> which is set to 0 minute.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="routing-data-through-a-http-proxy-for-your-extension">Routing data through a HTTP proxy for your extension<a class="hash-link" href="#routing-data-through-a-http-proxy-for-your-extension" title="Direct link to heading">​</a></h3><p>You can add the ability for the <code>HttpClient</code> of your extension to connect through an HTTP proxy. </p><p>To support proxy connection for your extension&#x27;s HTTP client:</p><ol><li>Add <code>HttpClientProxyConfig</code> as a <code>@JsonProperty</code> to the HTTP config class of your extension. </li><li>In the extension&#x27;s module class, add <code>HttpProxyConfig</code> config to <code>HttpClientConfig</code>.
For example, where <code>config</code> variable is the extension&#x27;s HTTP config from step 1:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">final HttpClientConfig.Builder builder = HttpClientConfig</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    .builder()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    .withNumConnections(1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    .withReadTimeout(config.getReadTimeout().toStandardDuration())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    .withHttpProxyConfig(config.getProxyConfig());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bundle-your-extension-with-all-the-other-druid-extensions">Bundle your extension with all the other Druid extensions<a class="hash-link" href="#bundle-your-extension-with-all-the-other-druid-extensions" title="Direct link to heading">​</a></h3><p>When you do <code>mvn install</code>, Druid extensions will be packaged within the Druid tarball and <code>extensions</code> directory, which are both underneath <code>distribution/target/</code>.</p><p>If you want your extension to be included, you can add your extension&#x27;s maven coordinate as an argument at
<a href="https://github.com/apache/druid/blob/master/distribution/pom.xml#L95" target="_blank" rel="noopener noreferrer">distribution/pom.xml</a></p><p>During <code>mvn install</code>, maven will install your extension to the local maven repository, and then call <a href="/docs/operations/pull-deps">pull-deps</a> to pull your extension from
there. In the end, you should see your extension underneath <code>distribution/target/extensions</code> and within Druid tarball.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="managing-dependencies">Managing dependencies<a class="hash-link" href="#managing-dependencies" title="Direct link to heading">​</a></h3><p>Managing library collisions can be daunting for extensions which draw in commonly used libraries. Here is a list of group IDs for libraries that are suggested to be specified with a <code>provided</code> scope to prevent collision with versions used in druid:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.apache.druid&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.metamx.druid&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;asm&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.ow2.asm&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.jboss.netty&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.google.guava&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.google.code.findbugs&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.google.protobuf&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.esotericsoftware.minlog&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;log4j&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.slf4j&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;commons-logging&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.eclipse.jetty&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.mortbay.jetty&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.sun.jersey&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.sun.jersey.contribs&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;common-beanutils&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;commons-codec&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;commons-lang&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;commons-cli&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;commons-io&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;javax.activation&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.apache.httpcomponents&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.apache.zookeeper&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.codehaus.jackson&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.fasterxml.jackson&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.fasterxml.jackson.core&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.fasterxml.jackson.dataformat&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;com.fasterxml.jackson.datatype&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;org.roaringbitmap&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;net.java.dev.jets3t&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See the documentation in <code>org.apache.druid.cli.PullDependencies</code> for more information.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/druid/edit/master/docs/../docs/development/modules.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-17T04:58:11.000Z">Sep 17, 2022</time></b> by <b>Gian Merlino</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/development/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Developing on Druid</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/development/javascript"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JavaScript functionality</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#writing-your-own-extensions" class="table-of-contents__link toc-highlight">Writing your own extensions</a><ul><li><a href="#creating-a-druid-module" class="table-of-contents__link toc-highlight">Creating a Druid Module</a></li><li><a href="#registering-your-druid-module" class="table-of-contents__link toc-highlight">Registering your Druid Module</a></li><li><a href="#adding-a-new-deep-storage-implementation" class="table-of-contents__link toc-highlight">Adding a new deep storage implementation</a></li><li><a href="#validating-your-deep-storage-implementation" class="table-of-contents__link toc-highlight">Validating your deep storage implementation</a></li><li><a href="#adding-support-for-a-new-input-source" class="table-of-contents__link toc-highlight">Adding support for a new input source</a></li><li><a href="#adding-support-for-a-new-data-format" class="table-of-contents__link toc-highlight">Adding support for a new data format</a></li><li><a href="#adding-aggregators" class="table-of-contents__link toc-highlight">Adding Aggregators</a></li><li><a href="#adding-complex-metrics" class="table-of-contents__link toc-highlight">Adding Complex Metrics</a></li><li><a href="#adding-new-query-types" class="table-of-contents__link toc-highlight">Adding new Query types</a></li><li><a href="#adding-new-jersey-resources" class="table-of-contents__link toc-highlight">Adding new Jersey resources</a></li><li><a href="#adding-a-new-password-provider-implementation" class="table-of-contents__link toc-highlight">Adding a new Password Provider implementation</a></li><li><a href="#adding-a-new-dynamicconfigprovider-implementation" class="table-of-contents__link toc-highlight">Adding a new DynamicConfigProvider implementation</a></li><li><a href="#adding-a-transform-extension" class="table-of-contents__link toc-highlight">Adding a Transform Extension</a></li><li><a href="#adding-your-own-custom-pluggable-coordinator-duty" class="table-of-contents__link toc-highlight">Adding your own custom pluggable Coordinator Duty</a></li><li><a href="#routing-data-through-a-http-proxy-for-your-extension" class="table-of-contents__link toc-highlight">Routing data through a HTTP proxy for your extension</a></li><li><a href="#bundle-your-extension-with-all-the-other-druid-extensions" class="table-of-contents__link toc-highlight">Bundle your extension with all the other Druid extensions</a></li><li><a href="#managing-dependencies" class="table-of-contents__link toc-highlight">Managing dependencies</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/favicon.png" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/favicon.png" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright © 2023 Apache Software Foundation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.48cb3551.js"></script>
<script src="/assets/js/main.fe95e508.js"></script>
</body>
</html>